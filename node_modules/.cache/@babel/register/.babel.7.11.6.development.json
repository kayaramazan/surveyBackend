{
  "{\"sourceRoot\":\"/Users/hello/Desktop/Kentkart/surveyApi/test/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/hello/Desktop/Kentkart/surveyApi\",\"filename\":\"/Users/hello/Desktop/Kentkart/surveyApi/test/index.js\",\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/hello/Desktop/Kentkart/surveyApi\",\"plugins\":[],\"presets\":[]}:7.11.6": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/hello/Desktop/Kentkart/surveyApi/test/",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/hello/Desktop/Kentkart/surveyApi",
      "filename": "/Users/hello/Desktop/Kentkart/surveyApi/test/index.js",
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/hello/Desktop/Kentkart/surveyApi",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/hello/Desktop/Kentkart/surveyApi/test/index.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "/Users/hello/Desktop/Kentkart/surveyApi/test/index.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/hello/Desktop/Kentkart/surveyApi/test/",
        "sourceFileName": "index.js"
      }
    },
    "ast": null,
    "code": "const chai = require('chai');\n\nconst chaiHttp = require('chai-http');\n\nconst app = require('../app');\n\nchai.use(chaiHttp);\ndescribe('users', () => {\n  describe('GET /users', () => {\n    it('Users donucek', done => {\n      chai.request(app).get('/api/users').end((err, res) => {\n        if (err) done(err).expect(res).to.have.status(200).expect(res.body).to.be.an('array');\n        done();\n      });\n    });\n  }), describe('Anket Sorularini Listelene', () => {\n    describe('GET  /survey/questions', () => {\n      it('Sorular ve cevap siklari cekilicek', done => {\n        chai.request(app).get('api/survey/questions').end((err, res) => {\n          if (err) done(err).expect(res).to.have.status(200).expect(res.body).to.be.an('array');\n          done();\n        });\n      });\n    });\n  });\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImNoYWkiLCJyZXF1aXJlIiwiY2hhaUh0dHAiLCJhcHAiLCJ1c2UiLCJkZXNjcmliZSIsIml0IiwiZG9uZSIsInJlcXVlc3QiLCJnZXQiLCJlbmQiLCJlcnIiLCJyZXMiLCJleHBlY3QiLCJ0byIsImhhdmUiLCJzdGF0dXMiLCJib2R5IiwiYmUiLCJhbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsSUFBSSxHQUFHQyxPQUFPLENBQUMsTUFBRCxDQUFwQjs7QUFDQSxNQUFNQyxRQUFRLEdBQUdELE9BQU8sQ0FBQyxXQUFELENBQXhCOztBQUNBLE1BQU1FLEdBQUcsR0FBR0YsT0FBTyxDQUFDLFFBQUQsQ0FBbkI7O0FBRUFELElBQUksQ0FBQ0ksR0FBTCxDQUFTRixRQUFUO0FBRUFHLFFBQVEsQ0FBQyxPQUFELEVBQVUsTUFBSTtBQUNsQkEsRUFBQUEsUUFBUSxDQUFDLFlBQUQsRUFBYyxNQUN0QjtBQUNJQyxJQUFBQSxFQUFFLENBQUMsZUFBRCxFQUFrQkMsSUFBRCxJQUFRO0FBQ3ZCUCxNQUFBQSxJQUFJLENBQUNRLE9BQUwsQ0FBYUwsR0FBYixFQUNDTSxHQURELENBQ0ssWUFETCxFQUVDQyxHQUZELENBRUssQ0FBQ0MsR0FBRCxFQUFLQyxHQUFMLEtBQVc7QUFDWixZQUFHRCxHQUFILEVBQVFKLElBQUksQ0FBQ0ksR0FBRCxDQUFKLENBQ1BFLE1BRE8sQ0FDQUQsR0FEQSxFQUNLRSxFQURMLENBQ1FDLElBRFIsQ0FDYUMsTUFEYixDQUNvQixHQURwQixFQUVQSCxNQUZPLENBRUFELEdBQUcsQ0FBQ0ssSUFGSixFQUVVSCxFQUZWLENBRWFJLEVBRmIsQ0FFZ0JDLEVBRmhCLENBRW1CLE9BRm5CO0FBR1JaLFFBQUFBLElBQUk7QUFDUCxPQVBEO0FBUUgsS0FUQyxDQUFGO0FBVUgsR0FaTyxDQUFSLEVBYUFGLFFBQVEsQ0FBQyw0QkFBRCxFQUE4QixNQUFJO0FBQ3RDQSxJQUFBQSxRQUFRLENBQUMsd0JBQUQsRUFBMEIsTUFBSTtBQUNsQ0MsTUFBQUEsRUFBRSxDQUFDLG9DQUFELEVBQXVDQyxJQUFELElBQVE7QUFDNUNQLFFBQUFBLElBQUksQ0FBQ1EsT0FBTCxDQUFhTCxHQUFiLEVBQ0NNLEdBREQsQ0FDSyxzQkFETCxFQUVDQyxHQUZELENBRUssQ0FBQ0MsR0FBRCxFQUFLQyxHQUFMLEtBQVc7QUFDWixjQUFHRCxHQUFILEVBQVFKLElBQUksQ0FBQ0ksR0FBRCxDQUFKLENBQ1BFLE1BRE8sQ0FDQUQsR0FEQSxFQUNLRSxFQURMLENBQ1FDLElBRFIsQ0FDYUMsTUFEYixDQUNvQixHQURwQixFQUVQSCxNQUZPLENBRUFELEdBQUcsQ0FBQ0ssSUFGSixFQUVVSCxFQUZWLENBRWFJLEVBRmIsQ0FFZ0JDLEVBRmhCLENBRW1CLE9BRm5CO0FBR1JaLFVBQUFBLElBQUk7QUFDUCxTQVBEO0FBUUgsT0FUQyxDQUFGO0FBVUgsS0FYTyxDQUFSO0FBWUgsR0FiTyxDQWJSO0FBMkJILENBNUJPLENBQVIiLCJzb3VyY2VSb290IjoiL1VzZXJzL2hlbGxvL0Rlc2t0b3AvS2VudGthcnQvc3VydmV5QXBpL3Rlc3QvIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgY2hhaSA9IHJlcXVpcmUoJ2NoYWknKVxuY29uc3QgY2hhaUh0dHAgPSByZXF1aXJlKCdjaGFpLWh0dHAnKVxuY29uc3QgYXBwID0gcmVxdWlyZSgnLi4vYXBwJykgXG5cbmNoYWkudXNlKGNoYWlIdHRwKVxuXG5kZXNjcmliZSgndXNlcnMnLCAoKT0+e1xuICAgIGRlc2NyaWJlKCdHRVQgL3VzZXJzJywoKT0+XG4gICAge1xuICAgICAgICBpdCgnVXNlcnMgZG9udWNlaycsKGRvbmUpPT57XG4gICAgICAgICAgICBjaGFpLnJlcXVlc3QoYXBwKVxuICAgICAgICAgICAgLmdldCgnL2FwaS91c2VycycpXG4gICAgICAgICAgICAuZW5kKChlcnIscmVzKT0+e1xuICAgICAgICAgICAgICAgIGlmKGVycikgZG9uZShlcnIpXG4gICAgICAgICAgICAgICAgLmV4cGVjdChyZXMpLnRvLmhhdmUuc3RhdHVzKDIwMClcbiAgICAgICAgICAgICAgICAuZXhwZWN0KHJlcy5ib2R5KS50by5iZS5hbignYXJyYXknKVxuICAgICAgICAgICAgICAgIGRvbmUoKTtcbiAgICAgICAgICAgIH0pICAgXG4gICAgICAgIH0pXG4gICAgfSksXG4gICAgZGVzY3JpYmUoJ0Fua2V0IFNvcnVsYXJpbmkgTGlzdGVsZW5lJywoKT0+e1xuICAgICAgICBkZXNjcmliZSgnR0VUICAvc3VydmV5L3F1ZXN0aW9ucycsKCk9PntcbiAgICAgICAgICAgIGl0KCdTb3J1bGFyIHZlIGNldmFwIHNpa2xhcmkgY2VraWxpY2VrJywoZG9uZSk9PntcbiAgICAgICAgICAgICAgICBjaGFpLnJlcXVlc3QoYXBwKVxuICAgICAgICAgICAgICAgIC5nZXQoJ2FwaS9zdXJ2ZXkvcXVlc3Rpb25zJylcbiAgICAgICAgICAgICAgICAuZW5kKChlcnIscmVzKT0+eyBcbiAgICAgICAgICAgICAgICAgICAgaWYoZXJyKSBkb25lKGVycikgXG4gICAgICAgICAgICAgICAgICAgIC5leHBlY3QocmVzKS50by5oYXZlLnN0YXR1cygyMDApXG4gICAgICAgICAgICAgICAgICAgIC5leHBlY3QocmVzLmJvZHkpLnRvLmJlLmFuKCdhcnJheScpXG4gICAgICAgICAgICAgICAgICAgIGRvbmUoKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICB9KSBcbn0pIl19",
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "chai",
        "require",
        "chaiHttp",
        "app",
        "use",
        "describe",
        "it",
        "done",
        "request",
        "get",
        "end",
        "err",
        "res",
        "expect",
        "to",
        "have",
        "status",
        "body",
        "be",
        "an"
      ],
      "mappings": "AAAA,MAAMA,IAAI,GAAGC,OAAO,CAAC,MAAD,CAApB;;AACA,MAAMC,QAAQ,GAAGD,OAAO,CAAC,WAAD,CAAxB;;AACA,MAAME,GAAG,GAAGF,OAAO,CAAC,QAAD,CAAnB;;AAEAD,IAAI,CAACI,GAAL,CAASF,QAAT;AAEAG,QAAQ,CAAC,OAAD,EAAU,MAAI;AAClBA,EAAAA,QAAQ,CAAC,YAAD,EAAc,MACtB;AACIC,IAAAA,EAAE,CAAC,eAAD,EAAkBC,IAAD,IAAQ;AACvBP,MAAAA,IAAI,CAACQ,OAAL,CAAaL,GAAb,EACCM,GADD,CACK,YADL,EAECC,GAFD,CAEK,CAACC,GAAD,EAAKC,GAAL,KAAW;AACZ,YAAGD,GAAH,EAAQJ,IAAI,CAACI,GAAD,CAAJ,CACPE,MADO,CACAD,GADA,EACKE,EADL,CACQC,IADR,CACaC,MADb,CACoB,GADpB,EAEPH,MAFO,CAEAD,GAAG,CAACK,IAFJ,EAEUH,EAFV,CAEaI,EAFb,CAEgBC,EAFhB,CAEmB,OAFnB;AAGRZ,QAAAA,IAAI;AACP,OAPD;AAQH,KATC,CAAF;AAUH,GAZO,CAAR,EAaAF,QAAQ,CAAC,4BAAD,EAA8B,MAAI;AACtCA,IAAAA,QAAQ,CAAC,wBAAD,EAA0B,MAAI;AAClCC,MAAAA,EAAE,CAAC,oCAAD,EAAuCC,IAAD,IAAQ;AAC5CP,QAAAA,IAAI,CAACQ,OAAL,CAAaL,GAAb,EACCM,GADD,CACK,sBADL,EAECC,GAFD,CAEK,CAACC,GAAD,EAAKC,GAAL,KAAW;AACZ,cAAGD,GAAH,EAAQJ,IAAI,CAACI,GAAD,CAAJ,CACPE,MADO,CACAD,GADA,EACKE,EADL,CACQC,IADR,CACaC,MADb,CACoB,GADpB,EAEPH,MAFO,CAEAD,GAAG,CAACK,IAFJ,EAEUH,EAFV,CAEaI,EAFb,CAEgBC,EAFhB,CAEmB,OAFnB;AAGRZ,UAAAA,IAAI;AACP,SAPD;AAQH,OATC,CAAF;AAUH,KAXO,CAAR;AAYH,GAbO,CAbR;AA2BH,CA5BO,CAAR",
      "sourceRoot": "/Users/hello/Desktop/Kentkart/surveyApi/test/",
      "sourcesContent": [
        "const chai = require('chai')\nconst chaiHttp = require('chai-http')\nconst app = require('../app') \n\nchai.use(chaiHttp)\n\ndescribe('users', ()=>{\n    describe('GET /users',()=>\n    {\n        it('Users donucek',(done)=>{\n            chai.request(app)\n            .get('/api/users')\n            .end((err,res)=>{\n                if(err) done(err)\n                .expect(res).to.have.status(200)\n                .expect(res.body).to.be.an('array')\n                done();\n            })   \n        })\n    }),\n    describe('Anket Sorularini Listelene',()=>{\n        describe('GET  /survey/questions',()=>{\n            it('Sorular ve cevap siklari cekilicek',(done)=>{\n                chai.request(app)\n                .get('api/survey/questions')\n                .end((err,res)=>{ \n                    if(err) done(err) \n                    .expect(res).to.have.status(200)\n                    .expect(res.body).to.be.an('array')\n                    done();\n                })\n            })\n        })\n    }) \n})"
      ]
    },
    "sourceType": "module",
    "mtime": 1602751047280
  },
  "{\"sourceRoot\":\"/Users/hello/Desktop/Kentkart/surveyApi/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/hello/Desktop/Kentkart/surveyApi\",\"filename\":\"/Users/hello/Desktop/Kentkart/surveyApi/app.js\",\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/hello/Desktop/Kentkart/surveyApi\",\"plugins\":[],\"presets\":[]}:7.11.6": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/hello/Desktop/Kentkart/surveyApi/",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/hello/Desktop/Kentkart/surveyApi",
      "filename": "/Users/hello/Desktop/Kentkart/surveyApi/app.js",
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/hello/Desktop/Kentkart/surveyApi",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/hello/Desktop/Kentkart/surveyApi/app.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "/Users/hello/Desktop/Kentkart/surveyApi/app.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/hello/Desktop/Kentkart/surveyApi/",
        "sourceFileName": "app.js"
      }
    },
    "ast": null,
    "code": "var createError = require('http-errors');\n\nvar express = require('express');\n\nvar path = require('path');\n\nvar cookieParser = require('cookie-parser');\n\nvar logger = require('morgan');\n\nvar indexRouter = require('./routes/index');\n\nvar surveyRouter = require('./routes/survey');\n\nvar usersRouter = require('./routes/users');\n\nvar adminRouter = require('./routes/admin');\n\nvar app = express(); // view engine setup\n\napp.set('views', path.join(__dirname, 'views'));\napp.set('view engine', 'jade');\napp.use(logger('dev'));\napp.use(express.json());\napp.use(express.urlencoded({\n  extended: false\n}));\napp.use(cookieParser());\napp.use(express.static(path.join(__dirname, 'public')));\napp.use('/', indexRouter);\napp.use('/api/survey', surveyRouter);\napp.use('/api/users', usersRouter);\napp.use('/api/admin', adminRouter); // catch 404 and forward to error handler\n\napp.use(function (req, res, next) {\n  next(createError(404));\n}); // error handler\n\napp.use(function (err, req, res, next) {\n  // set locals, only providing error in development\n  res.locals.message = err.message;\n  res.locals.error = req.app.get('env') === 'development' ? err : {}; // render the error page\n\n  res.status(err.status || 500);\n  res.render('error');\n});\nmodule.exports = app;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJjcmVhdGVFcnJvciIsInJlcXVpcmUiLCJleHByZXNzIiwicGF0aCIsImNvb2tpZVBhcnNlciIsImxvZ2dlciIsImluZGV4Um91dGVyIiwic3VydmV5Um91dGVyIiwidXNlcnNSb3V0ZXIiLCJhZG1pblJvdXRlciIsImFwcCIsInNldCIsImpvaW4iLCJfX2Rpcm5hbWUiLCJ1c2UiLCJqc29uIiwidXJsZW5jb2RlZCIsImV4dGVuZGVkIiwic3RhdGljIiwicmVxIiwicmVzIiwibmV4dCIsImVyciIsImxvY2FscyIsIm1lc3NhZ2UiLCJlcnJvciIsImdldCIsInN0YXR1cyIsInJlbmRlciIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBLElBQUlBLFdBQVcsR0FBR0MsT0FBTyxDQUFDLGFBQUQsQ0FBekI7O0FBQ0EsSUFBSUMsT0FBTyxHQUFHRCxPQUFPLENBQUMsU0FBRCxDQUFyQjs7QUFDQSxJQUFJRSxJQUFJLEdBQUdGLE9BQU8sQ0FBQyxNQUFELENBQWxCOztBQUNBLElBQUlHLFlBQVksR0FBR0gsT0FBTyxDQUFDLGVBQUQsQ0FBMUI7O0FBQ0EsSUFBSUksTUFBTSxHQUFHSixPQUFPLENBQUMsUUFBRCxDQUFwQjs7QUFFQSxJQUFJSyxXQUFXLEdBQUdMLE9BQU8sQ0FBQyxnQkFBRCxDQUF6Qjs7QUFDQSxJQUFJTSxZQUFZLEdBQUdOLE9BQU8sQ0FBQyxpQkFBRCxDQUExQjs7QUFDQSxJQUFJTyxXQUFXLEdBQUdQLE9BQU8sQ0FBQyxnQkFBRCxDQUF6Qjs7QUFDQSxJQUFJUSxXQUFXLEdBQUdSLE9BQU8sQ0FBQyxnQkFBRCxDQUF6Qjs7QUFFQSxJQUFJUyxHQUFHLEdBQUdSLE9BQU8sRUFBakIsQyxDQUVBOztBQUNBUSxHQUFHLENBQUNDLEdBQUosQ0FBUSxPQUFSLEVBQWlCUixJQUFJLENBQUNTLElBQUwsQ0FBVUMsU0FBVixFQUFxQixPQUFyQixDQUFqQjtBQUNBSCxHQUFHLENBQUNDLEdBQUosQ0FBUSxhQUFSLEVBQXVCLE1BQXZCO0FBRUFELEdBQUcsQ0FBQ0ksR0FBSixDQUFRVCxNQUFNLENBQUMsS0FBRCxDQUFkO0FBQ0FLLEdBQUcsQ0FBQ0ksR0FBSixDQUFRWixPQUFPLENBQUNhLElBQVIsRUFBUjtBQUNBTCxHQUFHLENBQUNJLEdBQUosQ0FBUVosT0FBTyxDQUFDYyxVQUFSLENBQW1CO0FBQUVDLEVBQUFBLFFBQVEsRUFBRTtBQUFaLENBQW5CLENBQVI7QUFDQVAsR0FBRyxDQUFDSSxHQUFKLENBQVFWLFlBQVksRUFBcEI7QUFDQU0sR0FBRyxDQUFDSSxHQUFKLENBQVFaLE9BQU8sQ0FBQ2dCLE1BQVIsQ0FBZWYsSUFBSSxDQUFDUyxJQUFMLENBQVVDLFNBQVYsRUFBcUIsUUFBckIsQ0FBZixDQUFSO0FBRUFILEdBQUcsQ0FBQ0ksR0FBSixDQUFRLEdBQVIsRUFBYVIsV0FBYjtBQUNBSSxHQUFHLENBQUNJLEdBQUosQ0FBUSxhQUFSLEVBQXVCUCxZQUF2QjtBQUNBRyxHQUFHLENBQUNJLEdBQUosQ0FBUSxZQUFSLEVBQXNCTixXQUF0QjtBQUNBRSxHQUFHLENBQUNJLEdBQUosQ0FBUSxZQUFSLEVBQXNCTCxXQUF0QixFLENBRUE7O0FBQ0FDLEdBQUcsQ0FBQ0ksR0FBSixDQUFRLFVBQVNLLEdBQVQsRUFBY0MsR0FBZCxFQUFtQkMsSUFBbkIsRUFBeUI7QUFDL0JBLEVBQUFBLElBQUksQ0FBQ3JCLFdBQVcsQ0FBQyxHQUFELENBQVosQ0FBSjtBQUNELENBRkQsRSxDQUlBOztBQUNBVSxHQUFHLENBQUNJLEdBQUosQ0FBUSxVQUFTUSxHQUFULEVBQWNILEdBQWQsRUFBbUJDLEdBQW5CLEVBQXdCQyxJQUF4QixFQUE4QjtBQUNwQztBQUNBRCxFQUFBQSxHQUFHLENBQUNHLE1BQUosQ0FBV0MsT0FBWCxHQUFxQkYsR0FBRyxDQUFDRSxPQUF6QjtBQUNBSixFQUFBQSxHQUFHLENBQUNHLE1BQUosQ0FBV0UsS0FBWCxHQUFtQk4sR0FBRyxDQUFDVCxHQUFKLENBQVFnQixHQUFSLENBQVksS0FBWixNQUF1QixhQUF2QixHQUF1Q0osR0FBdkMsR0FBNkMsRUFBaEUsQ0FIb0MsQ0FLcEM7O0FBQ0FGLEVBQUFBLEdBQUcsQ0FBQ08sTUFBSixDQUFXTCxHQUFHLENBQUNLLE1BQUosSUFBYyxHQUF6QjtBQUNBUCxFQUFBQSxHQUFHLENBQUNRLE1BQUosQ0FBVyxPQUFYO0FBQ0QsQ0FSRDtBQVVBQyxNQUFNLENBQUNDLE9BQVAsR0FBaUJwQixHQUFqQiIsInNvdXJjZVJvb3QiOiIvVXNlcnMvaGVsbG8vRGVza3RvcC9LZW50a2FydC9zdXJ2ZXlBcGkvIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGNyZWF0ZUVycm9yID0gcmVxdWlyZSgnaHR0cC1lcnJvcnMnKTtcbnZhciBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xudmFyIHBhdGggPSByZXF1aXJlKCdwYXRoJyk7XG52YXIgY29va2llUGFyc2VyID0gcmVxdWlyZSgnY29va2llLXBhcnNlcicpO1xudmFyIGxvZ2dlciA9IHJlcXVpcmUoJ21vcmdhbicpO1xuXG52YXIgaW5kZXhSb3V0ZXIgPSByZXF1aXJlKCcuL3JvdXRlcy9pbmRleCcpO1xudmFyIHN1cnZleVJvdXRlciA9IHJlcXVpcmUoJy4vcm91dGVzL3N1cnZleScpO1xudmFyIHVzZXJzUm91dGVyID0gcmVxdWlyZSgnLi9yb3V0ZXMvdXNlcnMnKTtcbnZhciBhZG1pblJvdXRlciA9IHJlcXVpcmUoJy4vcm91dGVzL2FkbWluJyk7XG5cbnZhciBhcHAgPSBleHByZXNzKCk7XG5cbi8vIHZpZXcgZW5naW5lIHNldHVwXG5hcHAuc2V0KCd2aWV3cycsIHBhdGguam9pbihfX2Rpcm5hbWUsICd2aWV3cycpKTtcbmFwcC5zZXQoJ3ZpZXcgZW5naW5lJywgJ2phZGUnKTtcblxuYXBwLnVzZShsb2dnZXIoJ2RldicpKTtcbmFwcC51c2UoZXhwcmVzcy5qc29uKCkpO1xuYXBwLnVzZShleHByZXNzLnVybGVuY29kZWQoeyBleHRlbmRlZDogZmFsc2UgfSkpO1xuYXBwLnVzZShjb29raWVQYXJzZXIoKSk7XG5hcHAudXNlKGV4cHJlc3Muc3RhdGljKHBhdGguam9pbihfX2Rpcm5hbWUsICdwdWJsaWMnKSkpO1xuXG5hcHAudXNlKCcvJywgaW5kZXhSb3V0ZXIpO1xuYXBwLnVzZSgnL2FwaS9zdXJ2ZXknLCBzdXJ2ZXlSb3V0ZXIpO1xuYXBwLnVzZSgnL2FwaS91c2VycycsIHVzZXJzUm91dGVyKTtcbmFwcC51c2UoJy9hcGkvYWRtaW4nLCBhZG1pblJvdXRlcik7XG5cbi8vIGNhdGNoIDQwNCBhbmQgZm9yd2FyZCB0byBlcnJvciBoYW5kbGVyXG5hcHAudXNlKGZ1bmN0aW9uKHJlcSwgcmVzLCBuZXh0KSB7XG4gIG5leHQoY3JlYXRlRXJyb3IoNDA0KSk7XG59KTtcblxuLy8gZXJyb3IgaGFuZGxlclxuYXBwLnVzZShmdW5jdGlvbihlcnIsIHJlcSwgcmVzLCBuZXh0KSB7XG4gIC8vIHNldCBsb2NhbHMsIG9ubHkgcHJvdmlkaW5nIGVycm9yIGluIGRldmVsb3BtZW50XG4gIHJlcy5sb2NhbHMubWVzc2FnZSA9IGVyci5tZXNzYWdlO1xuICByZXMubG9jYWxzLmVycm9yID0gcmVxLmFwcC5nZXQoJ2VudicpID09PSAnZGV2ZWxvcG1lbnQnID8gZXJyIDoge307XG5cbiAgLy8gcmVuZGVyIHRoZSBlcnJvciBwYWdlXG4gIHJlcy5zdGF0dXMoZXJyLnN0YXR1cyB8fCA1MDApO1xuICByZXMucmVuZGVyKCdlcnJvcicpO1xufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gYXBwO1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "app.js"
      ],
      "names": [
        "createError",
        "require",
        "express",
        "path",
        "cookieParser",
        "logger",
        "indexRouter",
        "surveyRouter",
        "usersRouter",
        "adminRouter",
        "app",
        "set",
        "join",
        "__dirname",
        "use",
        "json",
        "urlencoded",
        "extended",
        "static",
        "req",
        "res",
        "next",
        "err",
        "locals",
        "message",
        "error",
        "get",
        "status",
        "render",
        "module",
        "exports"
      ],
      "mappings": "AAAA,IAAIA,WAAW,GAAGC,OAAO,CAAC,aAAD,CAAzB;;AACA,IAAIC,OAAO,GAAGD,OAAO,CAAC,SAAD,CAArB;;AACA,IAAIE,IAAI,GAAGF,OAAO,CAAC,MAAD,CAAlB;;AACA,IAAIG,YAAY,GAAGH,OAAO,CAAC,eAAD,CAA1B;;AACA,IAAII,MAAM,GAAGJ,OAAO,CAAC,QAAD,CAApB;;AAEA,IAAIK,WAAW,GAAGL,OAAO,CAAC,gBAAD,CAAzB;;AACA,IAAIM,YAAY,GAAGN,OAAO,CAAC,iBAAD,CAA1B;;AACA,IAAIO,WAAW,GAAGP,OAAO,CAAC,gBAAD,CAAzB;;AACA,IAAIQ,WAAW,GAAGR,OAAO,CAAC,gBAAD,CAAzB;;AAEA,IAAIS,GAAG,GAAGR,OAAO,EAAjB,C,CAEA;;AACAQ,GAAG,CAACC,GAAJ,CAAQ,OAAR,EAAiBR,IAAI,CAACS,IAAL,CAAUC,SAAV,EAAqB,OAArB,CAAjB;AACAH,GAAG,CAACC,GAAJ,CAAQ,aAAR,EAAuB,MAAvB;AAEAD,GAAG,CAACI,GAAJ,CAAQT,MAAM,CAAC,KAAD,CAAd;AACAK,GAAG,CAACI,GAAJ,CAAQZ,OAAO,CAACa,IAAR,EAAR;AACAL,GAAG,CAACI,GAAJ,CAAQZ,OAAO,CAACc,UAAR,CAAmB;AAAEC,EAAAA,QAAQ,EAAE;AAAZ,CAAnB,CAAR;AACAP,GAAG,CAACI,GAAJ,CAAQV,YAAY,EAApB;AACAM,GAAG,CAACI,GAAJ,CAAQZ,OAAO,CAACgB,MAAR,CAAef,IAAI,CAACS,IAAL,CAAUC,SAAV,EAAqB,QAArB,CAAf,CAAR;AAEAH,GAAG,CAACI,GAAJ,CAAQ,GAAR,EAAaR,WAAb;AACAI,GAAG,CAACI,GAAJ,CAAQ,aAAR,EAAuBP,YAAvB;AACAG,GAAG,CAACI,GAAJ,CAAQ,YAAR,EAAsBN,WAAtB;AACAE,GAAG,CAACI,GAAJ,CAAQ,YAAR,EAAsBL,WAAtB,E,CAEA;;AACAC,GAAG,CAACI,GAAJ,CAAQ,UAASK,GAAT,EAAcC,GAAd,EAAmBC,IAAnB,EAAyB;AAC/BA,EAAAA,IAAI,CAACrB,WAAW,CAAC,GAAD,CAAZ,CAAJ;AACD,CAFD,E,CAIA;;AACAU,GAAG,CAACI,GAAJ,CAAQ,UAASQ,GAAT,EAAcH,GAAd,EAAmBC,GAAnB,EAAwBC,IAAxB,EAA8B;AACpC;AACAD,EAAAA,GAAG,CAACG,MAAJ,CAAWC,OAAX,GAAqBF,GAAG,CAACE,OAAzB;AACAJ,EAAAA,GAAG,CAACG,MAAJ,CAAWE,KAAX,GAAmBN,GAAG,CAACT,GAAJ,CAAQgB,GAAR,CAAY,KAAZ,MAAuB,aAAvB,GAAuCJ,GAAvC,GAA6C,EAAhE,CAHoC,CAKpC;;AACAF,EAAAA,GAAG,CAACO,MAAJ,CAAWL,GAAG,CAACK,MAAJ,IAAc,GAAzB;AACAP,EAAAA,GAAG,CAACQ,MAAJ,CAAW,OAAX;AACD,CARD;AAUAC,MAAM,CAACC,OAAP,GAAiBpB,GAAjB",
      "sourceRoot": "/Users/hello/Desktop/Kentkart/surveyApi/",
      "sourcesContent": [
        "var createError = require('http-errors');\nvar express = require('express');\nvar path = require('path');\nvar cookieParser = require('cookie-parser');\nvar logger = require('morgan');\n\nvar indexRouter = require('./routes/index');\nvar surveyRouter = require('./routes/survey');\nvar usersRouter = require('./routes/users');\nvar adminRouter = require('./routes/admin');\n\nvar app = express();\n\n// view engine setup\napp.set('views', path.join(__dirname, 'views'));\napp.set('view engine', 'jade');\n\napp.use(logger('dev'));\napp.use(express.json());\napp.use(express.urlencoded({ extended: false }));\napp.use(cookieParser());\napp.use(express.static(path.join(__dirname, 'public')));\n\napp.use('/', indexRouter);\napp.use('/api/survey', surveyRouter);\napp.use('/api/users', usersRouter);\napp.use('/api/admin', adminRouter);\n\n// catch 404 and forward to error handler\napp.use(function(req, res, next) {\n  next(createError(404));\n});\n\n// error handler\napp.use(function(err, req, res, next) {\n  // set locals, only providing error in development\n  res.locals.message = err.message;\n  res.locals.error = req.app.get('env') === 'development' ? err : {};\n\n  // render the error page\n  res.status(err.status || 500);\n  res.render('error');\n});\n\nmodule.exports = app;\n"
      ]
    },
    "sourceType": "module",
    "mtime": 1601995172863
  },
  "{\"sourceRoot\":\"/Users/hello/Desktop/Kentkart/surveyApi/routes/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/hello/Desktop/Kentkart/surveyApi\",\"filename\":\"/Users/hello/Desktop/Kentkart/surveyApi/routes/index.js\",\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/hello/Desktop/Kentkart/surveyApi\",\"plugins\":[],\"presets\":[]}:7.11.6": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/hello/Desktop/Kentkart/surveyApi/routes/",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/hello/Desktop/Kentkart/surveyApi",
      "filename": "/Users/hello/Desktop/Kentkart/surveyApi/routes/index.js",
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/hello/Desktop/Kentkart/surveyApi",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/hello/Desktop/Kentkart/surveyApi/routes/index.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "/Users/hello/Desktop/Kentkart/surveyApi/routes/index.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/hello/Desktop/Kentkart/surveyApi/routes/",
        "sourceFileName": "index.js"
      }
    },
    "ast": null,
    "code": "var express = require('express');\n\nvar router = express.Router();\n/* GET home page. */\n\nrouter.get('/', function (req, res, next) {\n  res.render('index', {\n    title: 'Express'\n  });\n});\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImV4cHJlc3MiLCJyZXF1aXJlIiwicm91dGVyIiwiUm91dGVyIiwiZ2V0IiwicmVxIiwicmVzIiwibmV4dCIsInJlbmRlciIsInRpdGxlIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQUEsSUFBSUEsT0FBTyxHQUFHQyxPQUFPLENBQUMsU0FBRCxDQUFyQjs7QUFDQSxJQUFJQyxNQUFNLEdBQUdGLE9BQU8sQ0FBQ0csTUFBUixFQUFiO0FBRUE7O0FBQ0FELE1BQU0sQ0FBQ0UsR0FBUCxDQUFXLEdBQVgsRUFBZ0IsVUFBU0MsR0FBVCxFQUFjQyxHQUFkLEVBQW1CQyxJQUFuQixFQUF5QjtBQUN2Q0QsRUFBQUEsR0FBRyxDQUFDRSxNQUFKLENBQVcsT0FBWCxFQUFvQjtBQUFFQyxJQUFBQSxLQUFLLEVBQUU7QUFBVCxHQUFwQjtBQUNELENBRkQ7QUFJQUMsTUFBTSxDQUFDQyxPQUFQLEdBQWlCVCxNQUFqQiIsInNvdXJjZVJvb3QiOiIvVXNlcnMvaGVsbG8vRGVza3RvcC9LZW50a2FydC9zdXJ2ZXlBcGkvcm91dGVzLyIsInNvdXJjZXNDb250ZW50IjpbInZhciBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xudmFyIHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XG5cbi8qIEdFVCBob21lIHBhZ2UuICovXG5yb3V0ZXIuZ2V0KCcvJywgZnVuY3Rpb24ocmVxLCByZXMsIG5leHQpIHtcbiAgcmVzLnJlbmRlcignaW5kZXgnLCB7IHRpdGxlOiAnRXhwcmVzcycgfSk7XG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSByb3V0ZXI7XG4iXX0=",
    "map": {
      "version": 3,
      "sources": [
        "index.js"
      ],
      "names": [
        "express",
        "require",
        "router",
        "Router",
        "get",
        "req",
        "res",
        "next",
        "render",
        "title",
        "module",
        "exports"
      ],
      "mappings": "AAAA,IAAIA,OAAO,GAAGC,OAAO,CAAC,SAAD,CAArB;;AACA,IAAIC,MAAM,GAAGF,OAAO,CAACG,MAAR,EAAb;AAEA;;AACAD,MAAM,CAACE,GAAP,CAAW,GAAX,EAAgB,UAASC,GAAT,EAAcC,GAAd,EAAmBC,IAAnB,EAAyB;AACvCD,EAAAA,GAAG,CAACE,MAAJ,CAAW,OAAX,EAAoB;AAAEC,IAAAA,KAAK,EAAE;AAAT,GAApB;AACD,CAFD;AAIAC,MAAM,CAACC,OAAP,GAAiBT,MAAjB",
      "sourceRoot": "/Users/hello/Desktop/Kentkart/surveyApi/routes/",
      "sourcesContent": [
        "var express = require('express');\nvar router = express.Router();\n\n/* GET home page. */\nrouter.get('/', function(req, res, next) {\n  res.render('index', { title: 'Express' });\n});\n\nmodule.exports = router;\n"
      ]
    },
    "sourceType": "module",
    "mtime": 1601886528404
  },
  "{\"sourceRoot\":\"/Users/hello/Desktop/Kentkart/surveyApi/routes/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/hello/Desktop/Kentkart/surveyApi\",\"filename\":\"/Users/hello/Desktop/Kentkart/surveyApi/routes/survey.js\",\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/hello/Desktop/Kentkart/surveyApi\",\"plugins\":[],\"presets\":[]}:7.11.6": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/hello/Desktop/Kentkart/surveyApi/routes/",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/hello/Desktop/Kentkart/surveyApi",
      "filename": "/Users/hello/Desktop/Kentkart/surveyApi/routes/survey.js",
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/hello/Desktop/Kentkart/surveyApi",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/hello/Desktop/Kentkart/surveyApi/routes/survey.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "/Users/hello/Desktop/Kentkart/surveyApi/routes/survey.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/hello/Desktop/Kentkart/surveyApi/routes/",
        "sourceFileName": "survey.js"
      }
    },
    "ast": null,
    "code": "var express = require('express');\n\nvar router = express.Router();\n\nconst {\n  database\n} = require('../config/helpers');\n/* GET users listing. */\n\n\nrouter.get('/', function (req, res, next) {\n  res.send('respond with a resource');\n}); // sorular ve cevaplari cekiliyor\n\nrouter.get('/questions/:surveyCaptionId', (req, res) => {\n  surveyCaptionId = req.params.surveyCaptionId;\n  database.query(`select a.id as cevapId,q.id, q.surveyQuestion,a.answer from survey q join surveyAnswers a on q.id = a.QuestionId join surveyCaption sc on q.surveyCaptionId=sc.id where q.surveyCaptionId = ${surveyCaptionId} order by a.questionId,a.score `).then(result => {\n    res.status(200).send(result);\n  }).catch(err => {\n    res.status(300).send('Something went wrong !!');\n  });\n}); //butun yanitlari ceker\n\nrouter.get('/getAllAnswer', (req, res) => {\n  database.query('select u.username,a.surveyUserId ,q.surveyQuestion ,sa.answer from answers a  join users u on a.userId = u.id   join surveyAnswers sa on a.answerId = sa.id join survey q on a.questionId = q.id ').then(result => {\n    res.send(result);\n  }).catch(err => {\n    res.status(300).send('Something went wrong !!');\n  });\n}); //Anket isimlerini ceker\n\nrouter.get('/title', (req, res) => {\n  database.query('select * from surveyCaption').then(result => {\n    res.send(result);\n  }).catch(err => {\n    res.status(300).send('Something went wrong !!');\n  });\n}); //list survey by id\n\nrouter.get('/listById/:userId', (req, res) => {\n  userId = req.params.userId;\n  database.query(`select sa.id as surveyAssignId,u.id as id,sa.who,sa.whom,u.department as department,sa.surveyCaptionId,u.username as username,sc.surveyTitle as surveyTitle from surveyAssign as sa join users u on u.id=sa.whom join surveyCaption sc on sc.id = sa.surveyCaptionId where sa.who = ${userId}  order by u.username`).then(result => {\n    res.send(result);\n  });\n});\nrouter.post('/delete', (req, res) => {\n  console.log(req.body);\n  let captionId = req.body.captionId;\n  database.query(`delete from surveyCaption where id=${captionId}`).then(result => {\n    res.status(200).send({\n      success: true\n    });\n  }).catch(err => {\n    console.log(err);\n    res.status(300).send({\n      success: false\n    });\n  });\n}); // yeni soru ve cevaplari eklenir\n\nrouter.post('/new', (req, res) => {\n  let survey = req.body;\n  console.log(survey);\n  let surveyQuestion = survey.question;\n  let answers = [];\n  survey.answers.forEach(element => {\n    answers.push(element);\n    if (element == \"\") res.send({\n      success: false\n    });\n  });\n  if (survey.question == \"\") res.send({\n    success: false\n  });\n  database.query(`insert into survey (surveyQuestion,surveyCaptionId) values (\"${surveyQuestion}\",${survey.surveyCaptionId})`).then(result => {\n    questionId = result.insertId;\n    answers.forEach(item => {\n      database.query(`insert into surveyAnswers (questionId,answer,surveyCaptionId,score) values (${questionId},\"${item.cevap}\",${survey.surveyCaptionId},${item.score})`).catch(err => console.log(err));\n    });\n  }).catch(err => console.log(err));\n  res.status(200).send({\n    success: true\n  });\n}); // Yeni anket ismi ekleniyor\n\nrouter.post('/newCaption', (req, res) => {\n  console.log(req.body);\n\n  if (req.body.caption != \"\") {\n    database.query(`insert into surveyCaption (surveyTitle) values (\"${req.body.caption}\")`).then(result => {\n      res.send({\n        success: true\n      });\n    }).catch(err => console.log(err));\n  } else res.send({\n    success: false\n  });\n}); // Oylanan anket ekleme islemi yapiliyor\n\nrouter.post('/finalAnswer', (req, res) => {\n  console.log(req.body);\n  let result = req.body.answers.results;\n  let userId = req.body.answers.userId;\n  let surveyUserId = req.body.answers.surveyUserId;\n  let surveyCaptionId = req.body.answers.surveyCaptionId;\n  result.forEach(item => {\n    console.log(item);\n    database.query(`insert into answers (questionId,answerId,userId,surveyUserId,surveyCaptionId) values (${item.questionId},${item.answerId},${userId},${surveyUserId},${surveyCaptionId})`).then(e => console.log('inserted')).catch(err => console.log(err));\n  });\n  res.send({\n    succes: true\n  });\n});\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInN1cnZleS5qcyJdLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsInJvdXRlciIsIlJvdXRlciIsImRhdGFiYXNlIiwiZ2V0IiwicmVxIiwicmVzIiwibmV4dCIsInNlbmQiLCJzdXJ2ZXlDYXB0aW9uSWQiLCJwYXJhbXMiLCJxdWVyeSIsInRoZW4iLCJyZXN1bHQiLCJzdGF0dXMiLCJjYXRjaCIsImVyciIsInVzZXJJZCIsInBvc3QiLCJjb25zb2xlIiwibG9nIiwiYm9keSIsImNhcHRpb25JZCIsInN1Y2Nlc3MiLCJzdXJ2ZXkiLCJzdXJ2ZXlRdWVzdGlvbiIsInF1ZXN0aW9uIiwiYW5zd2VycyIsImZvckVhY2giLCJlbGVtZW50IiwicHVzaCIsInF1ZXN0aW9uSWQiLCJpbnNlcnRJZCIsIml0ZW0iLCJjZXZhcCIsInNjb3JlIiwiY2FwdGlvbiIsInJlc3VsdHMiLCJzdXJ2ZXlVc2VySWQiLCJhbnN3ZXJJZCIsImUiLCJzdWNjZXMiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQSxJQUFJQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxTQUFELENBQXJCOztBQUNBLElBQUlDLE1BQU0sR0FBR0YsT0FBTyxDQUFDRyxNQUFSLEVBQWI7O0FBQ0EsTUFBTTtBQUFFQyxFQUFBQTtBQUFGLElBQWVILE9BQU8sQ0FBQyxtQkFBRCxDQUE1QjtBQUNBOzs7QUFDQUMsTUFBTSxDQUFDRyxHQUFQLENBQVcsR0FBWCxFQUFnQixVQUFVQyxHQUFWLEVBQWVDLEdBQWYsRUFBb0JDLElBQXBCLEVBQTBCO0FBQ3hDRCxFQUFBQSxHQUFHLENBQUNFLElBQUosQ0FBUyx5QkFBVDtBQUNELENBRkQsRSxDQUlBOztBQUNBUCxNQUFNLENBQUNHLEdBQVAsQ0FBVyw2QkFBWCxFQUF5QyxDQUFDQyxHQUFELEVBQUtDLEdBQUwsS0FBWTtBQUNuREcsRUFBQUEsZUFBZSxHQUFHSixHQUFHLENBQUNLLE1BQUosQ0FBV0QsZUFBN0I7QUFDQU4sRUFBQUEsUUFBUSxDQUFD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QUFULENBQWlCbEIsZUFBdkM7QUFFQ0ksRUFBQUEsTUFBTSxDQUFDZSxPQUFQLENBQWVLLElBQUksSUFDbkI7QUFDRWQsSUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVlhLElBQVo7QUFDRTlCLElBQUFBLFFBQVEsQ0FBQ1EsS0FBVCxDQUFnQix5RkFBd0ZzQixJQUFJLENBQUNGLFVBQVcsSUFBR0UsSUFBSSxDQUFDTSxRQUFTLElBQUd0QixNQUFPLElBQUdxQixZQUFhLElBQUc3QixlQUFnQixHQUF0TCxFQUNDRyxJQURELENBQ000QixDQUFDLElBQUlyQixPQUFPLENBQUNDLEdBQVIsQ0FBWSxVQUFaLENBRFgsRUFFQ0wsS0FGRCxDQUVPQyxHQUFHLElBQUlHLE9BQU8sQ0FBQ0MsR0FBUixDQUFZSixHQUFaLENBRmQ7QUFHSCxHQU5EO0FBT0FWLEVBQUFBLEdBQUcsQ0FBQ0UsSUFBSixDQUFTO0FBQUNpQyxJQUFBQSxNQUFNLEVBQUM7QUFBUixHQUFUO0FBQ0YsQ0FoQkQ7QUFtQkFDLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQjFDLE1BQWpCIiwic291cmNlUm9vdCI6Ii9Vc2Vycy9oZWxsby9EZXNrdG9wL0tlbnRrYXJ0L3N1cnZleUFwaS9yb3V0ZXMvIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XG52YXIgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcbmNvbnN0IHsgZGF0YWJhc2UgfSA9IHJlcXVpcmUoJy4uL2NvbmZpZy9oZWxwZXJzJylcbi8qIEdFVCB1c2VycyBsaXN0aW5nLiAqL1xucm91dGVyLmdldCgnLycsIGZ1bmN0aW9uIChyZXEsIHJlcywgbmV4dCkge1xuICByZXMuc2VuZCgncmVzcG9uZCB3aXRoIGEgcmVzb3VyY2UnKTtcbn0pO1xuXG4vLyBzb3J1bGFyIHZlIGNldmFwbGFyaSBjZWtpbGl5b3JcbnJvdXRlci5nZXQoJy9xdWVzdGlvbnMvOnN1cnZleUNhcHRpb25JZCcsKHJlcSxyZXMpID0+e1xuICBzdXJ2ZXlDYXB0aW9uSWQgPSByZXEucGFyYW1zLnN1cnZleUNhcHRpb25JZDtcbiAgZGF0YWJhc2UucXVlcnkoYHNlbGVjdCBhLmlkIGFzIGNldmFwSWQscS5pZCwgcS5zdXJ2ZXlRdWVzdGlvbixhLmFuc3dlciBmcm9tIHN1cnZleSBxIGpvaW4gc3VydmV5QW5zd2VycyBhIG9uIHEuaWQgPSBhLlF1ZXN0aW9uSWQgam9pbiBzdXJ2ZXlDYXB0aW9uIHNjIG9uIHEuc3VydmV5Q2FwdGlvbklkPXNjLmlkIHdoZXJlIHEuc3VydmV5Q2FwdGlvbklkID0gJHtzdXJ2ZXlDYXB0aW9uSWR9IG9yZGVyIGJ5IGEucXVlc3Rpb25JZCxhLnNjb3JlIGApLnRoZW4oXG4gICAgcmVzdWx0ID0+IFxuICAgIHtcbiAgICAgIHJlcy5zdGF0dXMoMjAwKS5zZW5kKHJlc3VsdClcbiAgICB9KS5jYXRjaChcbiAgICAgIGVyciA9PiBcbiAgICB7XG4gICAgICByZXMuc3RhdHVzKDMwMCkuc2VuZCgnU29tZXRoaW5nIHdlbnQgd3JvbmcgISEnKVxuICAgIH0pXG59KVxuXG4vL2J1dHVuIHlhbml0bGFyaSBjZWtlclxucm91dGVyLmdldCgnL2dldEFsbEFuc3dlcicsKHJlcSxyZXMpPT57XG4gIGRhdGFiYXNlLnF1ZXJ5KCdzZWxlY3QgdS51c2VybmFtZSxhLnN1cnZleVVzZXJJZCAscS5zdXJ2ZXlRdWVzdGlvbiAsc2EuYW5zd2VyIGZyb20gYW5zd2VycyBhICBqb2luIHVzZXJzIHUgb24gYS51c2VySWQgPSB1LmlkICAgam9pbiBzdXJ2ZXlBbnN3ZXJzIHNhIG9uIGEuYW5zd2VySWQgPSBzYS5pZCBqb2luIHN1cnZleSBxIG9uIGEucXVlc3Rpb25JZCA9IHEuaWQgJylcbiAgLnRoZW4ocmVzdWx0ID0+eyAgXG4gICAgICByZXMuc2VuZChyZXN1bHQpXG4gICAgXG4gIH0pLmNhdGNoKFxuICAgIGVyciA9PiBcbiAge1xuICAgIHJlcy5zdGF0dXMoMzAwKS5zZW5kKCdTb21ldGhpbmcgd2VudCB3cm9uZyAhIScpXG4gIH0pXG59KVxuXG4vL0Fua2V0IGlzaW1sZXJpbmkgY2VrZXJcbnJvdXRlci5nZXQoJy90aXRsZScsKHJlcSxyZXMpPT57XG4gIGRhdGFiYXNlLnF1ZXJ5KCdzZWxlY3QgKiBmcm9tIHN1cnZleUNhcHRpb24nKVxuICAudGhlbihyZXN1bHQgPT57ICBcbiAgICAgIHJlcy5zZW5kKHJlc3VsdClcbiAgICBcbiAgfSkuY2F0Y2goXG4gICAgZXJyID0+IFxuICB7XG4gICAgcmVzLnN0YXR1cygzMDApLnNlbmQoJ1NvbWV0aGluZyB3ZW50IHdyb25nICEhJylcbiAgfSlcbn0pXG4vL2xpc3Qgc3VydmV5IGJ5IGlkXG4gcm91dGVyLmdldCgnL2xpc3RCeUlkLzp1c2VySWQnLChyZXEscmVzKSA9PlxuIHtcblxuICAgIHVzZXJJZCA9IHJlcS5wYXJhbXMudXNlcklkOyAgIFxuICAgIGRhdGFiYXNlLnF1ZXJ5KGBzZWxlY3Qgc2EuaWQgYXMgc3VydmV5QXNzaWduSWQsdS5pZCBhcyBpZCxzYS53aG8sc2Eud2hvbSx1LmRlcGFydG1lbnQgYXMgZGVwYXJ0bWVudCxzYS5zdXJ2ZXlDYXB0aW9uSWQsdS51c2VybmFtZSBhcyB1c2VybmFtZSxzYy5zdXJ2ZXlUaXRsZSBhcyBzdXJ2ZXlUaXRsZSBmcm9tIHN1cnZleUFzc2lnbiBhcyBzYSBqb2luIHVzZXJzIHUgb24gdS5pZD1zYS53aG9tIGpvaW4gc3VydmV5Q2FwdGlvbiBzYyBvbiBzYy5pZCA9IHNhLnN1cnZleUNhcHRpb25JZCB3aGVyZSBzYS53aG8gPSAke3VzZXJJZH0gIG9yZGVyIGJ5IHUudXNlcm5hbWVgKVxuICAgIC50aGVuKHJlc3VsdCA9PiB7IFxuICAgICAgcmVzLnNlbmQocmVzdWx0KVxuICAgIH0pXG4gfSlcbnJvdXRlci5wb3N0KCcvZGVsZXRlJywocmVxLHJlcyk9Plxue1xuICBjb25zb2xlLmxvZyhyZXEuYm9keSlcbiAgICBsZXQgY2FwdGlvbklkID0gcmVxLmJvZHkuY2FwdGlvbklkXG4gICAgZGF0YWJhc2UucXVlcnkoYGRlbGV0ZSBmcm9tIHN1cnZleUNhcHRpb24gd2hlcmUgaWQ9JHtjYXB0aW9uSWR9YCkudGhlbihyZXN1bHQ9PlxuICAgICAgICB7XG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5zZW5kKHtzdWNjZXNzOnRydWV9KVxuICAgIH0pLmNhdGNoKGVycj0+e1xuICAgICAgY29uc29sZS5sb2coZXJyKSBcbiAgICAgIHJlcy5zdGF0dXMoMzAwKS5zZW5kKHtzdWNjZXNzOmZhbHNlfSlcbiAgICB9KVxufSlcbi8vIHllbmkgc29ydSB2ZSBjZXZhcGxhcmkgZWtsZW5pclxucm91dGVyLnBvc3QoJy9uZXcnLCAocmVxLCByZXMpID0+IHsgXG4gIGxldCBzdXJ2ZXkgPSByZXEuYm9keTtcbiAgY29uc29sZS5sb2coc3VydmV5KVxuICBsZXQgc3VydmV5UXVlc3Rpb24gPSBzdXJ2ZXkucXVlc3Rpb247XG4gIFxuICBsZXQgYW5zd2VycyA9IFtdXG4gIHN1cnZleS5hbnN3ZXJzLmZvckVhY2goZWxlbWVudCA9PiB7XG4gICAgYW5zd2Vycy5wdXNoKGVsZW1lbnQpO1xuICAgIGlmKGVsZW1lbnQgPT0gXCJcIikgXG4gICAgICByZXMuc2VuZCh7c3VjY2VzczpmYWxzZX0pXG4gIH0pO1xuICBpZihzdXJ2ZXkucXVlc3Rpb24gPT0gXCJcIilcbiAgICByZXMuc2VuZCh7c3VjY2VzczpmYWxzZX0pXG5cbiAgZGF0YWJhc2UucXVlcnkoYGluc2VydCBpbnRvIHN1cnZleSAoc3VydmV5UXVlc3Rpb24sc3VydmV5Q2FwdGlvbklkKSB2YWx1ZXMgKFwiJHtzdXJ2ZXlRdWVzdGlvbn1cIiwke3N1cnZleS5zdXJ2ZXlDYXB0aW9uSWR9KWApXG4gICAgLnRoZW4ocmVzdWx0ID0+IHtcbiAgICAgIHF1ZXN0aW9uSWQgPSByZXN1bHQuaW5zZXJ0SWQ7XG4gICAgICBhbnN3ZXJzLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAgIGRhdGFiYXNlLnF1ZXJ5KGBpbnNlcnQgaW50byBzdXJ2ZXlBbnN3ZXJzIChxdWVzdGlvbklkLGFuc3dlcixzdXJ2ZXlDYXB0aW9uSWQsc2NvcmUpIHZhbHVlcyAoJHtxdWVzdGlvbklkfSxcIiR7aXRlbS5jZXZhcH1cIiwke3N1cnZleS5zdXJ2ZXlDYXB0aW9uSWR9LCR7aXRlbS5zY29yZX0pYCkuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGVycikpXG4gICAgICB9KVxuICAgIH0pLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKVxuICByZXMuc3RhdHVzKDIwMCkuc2VuZCh7c3VjY2Vzczp0cnVlfSk7XG5cbn0pXG4vLyBZZW5pIGFua2V0IGlzbWkgZWtsZW5peW9yXG5yb3V0ZXIucG9zdCgnL25ld0NhcHRpb24nLChyZXEscmVzKT0+e1xuICBjb25zb2xlLmxvZyhyZXEuYm9keSlcbiAgaWYocmVxLmJvZHkuY2FwdGlvbiE9XCJcIilcbiAge1xuICAgIGRhdGFiYXNlLnF1ZXJ5KGBpbnNlcnQgaW50byBzdXJ2ZXlDYXB0aW9uIChzdXJ2ZXlUaXRsZSkgdmFsdWVzIChcIiR7cmVxLmJvZHkuY2FwdGlvbn1cIilgKS50aGVuKHJlc3VsdD0+e1xuICAgICAgcmVzLnNlbmQoe3N1Y2Nlc3M6dHJ1ZX0pXG4gICAgfSkuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGVycikpXG4gIH1cbiAgZWxzZVxuICByZXMuc2VuZCh7c3VjY2VzczpmYWxzZX0pXG59KVxuLy8gT3lsYW5hbiBhbmtldCBla2xlbWUgaXNsZW1pIHlhcGlsaXlvclxucm91dGVyLnBvc3QoJy9maW5hbEFuc3dlcicsIChyZXEscmVzKSA9PlxueyBcbiAgY29uc29sZS5sb2cocmVxLmJvZHkpXG4gIGxldCByZXN1bHQgID0gcmVxLmJvZHkuYW5zd2Vycy5yZXN1bHRzO1xuICBsZXQgdXNlcklkID0gcmVxLmJvZHkuYW5zd2Vycy51c2VySWQ7XG4gIGxldCBzdXJ2ZXlVc2VySWQgPSByZXEuYm9keS5hbnN3ZXJzLnN1cnZleVVzZXJJZDsgXG4gIGxldCBzdXJ2ZXlDYXB0aW9uSWQgPSByZXEuYm9keS5hbnN3ZXJzLnN1cnZleUNhcHRpb25JZDsgXG4gIFxuICAgcmVzdWx0LmZvckVhY2goaXRlbSA9PlxuICAge1xuICAgICBjb25zb2xlLmxvZyhpdGVtKVxuICAgICAgIGRhdGFiYXNlLnF1ZXJ5KGBpbnNlcnQgaW50byBhbnN3ZXJzIChxdWVzdGlvbklkLGFuc3dlcklkLHVzZXJJZCxzdXJ2ZXlVc2VySWQsc3VydmV5Q2FwdGlvbklkKSB2YWx1ZXMgKCR7aXRlbS5xdWVzdGlvbklkfSwke2l0ZW0uYW5zd2VySWR9LCR7dXNlcklkfSwke3N1cnZleVVzZXJJZH0sJHtzdXJ2ZXlDYXB0aW9uSWR9KWApXG4gICAgICAgLnRoZW4oZSA9PiBjb25zb2xlLmxvZygnaW5zZXJ0ZWQnKSlcbiAgICAgICAuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGVycikpO1xuICAgfSlcbiAgIHJlcy5zZW5kKHtzdWNjZXM6dHJ1ZX0pXG59KSBcblxuXG5tb2R1bGUuZXhwb3J0cyA9IHJvdXRlcjtcbiJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "survey.js"
      ],
      "names": [
        "express",
        "require",
        "router",
        "Router",
        "database",
        "get",
        "req",
        "res",
        "next",
        "send",
        "surveyCaptionId",
        "params",
        "query",
        "then",
        "result",
        "status",
        "catch",
        "err",
        "userId",
        "post",
        "console",
        "log",
        "body",
        "captionId",
        "success",
        "survey",
        "surveyQuestion",
        "question",
        "answers",
        "forEach",
        "element",
        "push",
        "questionId",
        "insertId",
        "item",
        "cevap",
        "score",
        "caption",
        "results",
        "surveyUserId",
        "answerId",
        "e",
        "succes",
        "module",
        "exports"
      ],
      "mappings": "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",
      "sourceRoot": "/Users/hello/Desktop/Kentkart/surveyApi/routes/",
      "sourcesContent": [
        "var express = require('express');\nvar router = express.Router();\nconst { database } = require('../config/helpers')\n/* GET users listing. */\nrouter.get('/', function (req, res, next) {\n  res.send('respond with a resource');\n});\n\n// sorular ve cevaplari cekiliyor\nrouter.get('/questions/:surveyCaptionId',(req,res) =>{\n  surveyCaptionId = req.params.surveyCaptionId;\n  database.query(`select a.id as cevapId,q.id, q.surveyQuestion,a.answer from survey q join surveyAnswers a on q.id = a.QuestionId join surveyCaption sc on q.surveyCaptionId=sc.id where q.surveyCaptionId = ${surveyCaptionId} order by a.questionId,a.score `).then(\n    result => \n    {\n      res.status(200).send(result)\n    }).catch(\n      err => \n    {\n      res.status(300).send('Something went wrong !!')\n    })\n})\n\n//butun yanitlari ceker\nrouter.get('/getAllAnswer',(req,res)=>{\n  database.query('select u.username,a.surveyUserId ,q.surveyQuestion ,sa.answer from answers a  join users u on a.userId = u.id   join surveyAnswers sa on a.answerId = sa.id join survey q on a.questionId = q.id ')\n  .then(result =>{  \n      res.send(result)\n    \n  }).catch(\n    err => \n  {\n    res.status(300).send('Something went wrong !!')\n  })\n})\n\n//Anket isimlerini ceker\nrouter.get('/title',(req,res)=>{\n  database.query('select * from surveyCaption')\n  .then(result =>{  \n      res.send(result)\n    \n  }).catch(\n    err => \n  {\n    res.status(300).send('Something went wrong !!')\n  })\n})\n//list survey by id\n router.get('/listById/:userId',(req,res) =>\n {\n\n    userId = req.params.userId;   \n    database.query(`select sa.id as surveyAssignId,u.id as id,sa.who,sa.whom,u.department as department,sa.surveyCaptionId,u.username as username,sc.surveyTitle as surveyTitle from surveyAssign as sa join users u on u.id=sa.whom join surveyCaption sc on sc.id = sa.surveyCaptionId where sa.who = ${userId}  order by u.username`)\n    .then(result => { \n      res.send(result)\n    })\n })\nrouter.post('/delete',(req,res)=>\n{\n  console.log(req.body)\n    let captionId = req.body.captionId\n    database.query(`delete from surveyCaption where id=${captionId}`).then(result=>\n        {\n        res.status(200).send({success:true})\n    }).catch(err=>{\n      console.log(err) \n      res.status(300).send({success:false})\n    })\n})\n// yeni soru ve cevaplari eklenir\nrouter.post('/new', (req, res) => { \n  let survey = req.body;\n  console.log(survey)\n  let surveyQuestion = survey.question;\n  \n  let answers = []\n  survey.answers.forEach(element => {\n    answers.push(element);\n    if(element == \"\") \n      res.send({success:false})\n  });\n  if(survey.question == \"\")\n    res.send({success:false})\n\n  database.query(`insert into survey (surveyQuestion,surveyCaptionId) values (\"${surveyQuestion}\",${survey.surveyCaptionId})`)\n    .then(result => {\n      questionId = result.insertId;\n      answers.forEach(item => {\n        database.query(`insert into surveyAnswers (questionId,answer,surveyCaptionId,score) values (${questionId},\"${item.cevap}\",${survey.surveyCaptionId},${item.score})`).catch(err => console.log(err))\n      })\n    }).catch(err => console.log(err))\n  res.status(200).send({success:true});\n\n})\n// Yeni anket ismi ekleniyor\nrouter.post('/newCaption',(req,res)=>{\n  console.log(req.body)\n  if(req.body.caption!=\"\")\n  {\n    database.query(`insert into surveyCaption (surveyTitle) values (\"${req.body.caption}\")`).then(result=>{\n      res.send({success:true})\n    }).catch(err => console.log(err))\n  }\n  else\n  res.send({success:false})\n})\n// Oylanan anket ekleme islemi yapiliyor\nrouter.post('/finalAnswer', (req,res) =>\n{ \n  console.log(req.body)\n  let result  = req.body.answers.results;\n  let userId = req.body.answers.userId;\n  let surveyUserId = req.body.answers.surveyUserId; \n  let surveyCaptionId = req.body.answers.surveyCaptionId; \n  \n   result.forEach(item =>\n   {\n     console.log(item)\n       database.query(`insert into answers (questionId,answerId,userId,surveyUserId,surveyCaptionId) values (${item.questionId},${item.answerId},${userId},${surveyUserId},${surveyCaptionId})`)\n       .then(e => console.log('inserted'))\n       .catch(err => console.log(err));\n   })\n   res.send({succes:true})\n}) \n\n\nmodule.exports = router;\n"
      ]
    },
    "sourceType": "module",
    "mtime": 1602252986555
  },
  "{\"sourceRoot\":\"/Users/hello/Desktop/Kentkart/surveyApi/config/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/hello/Desktop/Kentkart/surveyApi\",\"filename\":\"/Users/hello/Desktop/Kentkart/surveyApi/config/helpers.js\",\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/hello/Desktop/Kentkart/surveyApi\",\"plugins\":[],\"presets\":[]}:7.11.6": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/hello/Desktop/Kentkart/surveyApi/config/",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/hello/Desktop/Kentkart/surveyApi",
      "filename": "/Users/hello/Desktop/Kentkart/surveyApi/config/helpers.js",
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/hello/Desktop/Kentkart/surveyApi",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/hello/Desktop/Kentkart/surveyApi/config/helpers.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "/Users/hello/Desktop/Kentkart/surveyApi/config/helpers.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/hello/Desktop/Kentkart/surveyApi/config/",
        "sourceFileName": "helpers.js"
      }
    },
    "ast": null,
    "code": "const mysqli = require('mysqli');\n\nlet conn = new mysqli({\n  host: 'localhost',\n  post: 3306,\n  user: 'root',\n  passwd: '',\n  charset: 'utf8_general_ci',\n  db: 'survey'\n});\nlet db = conn.emit(false, '');\nmodule.exports = {\n  database: db\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImhlbHBlcnMuanMiXSwibmFtZXMiOlsibXlzcWxpIiwicmVxdWlyZSIsImNvbm4iLCJob3N0IiwicG9zdCIsInVzZXIiLCJwYXNzd2QiLCJjaGFyc2V0IiwiZGIiLCJlbWl0IiwibW9kdWxlIiwiZXhwb3J0cyIsImRhdGFiYXNlIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxNQUFNLEdBQUdDLE9BQU8sQ0FBQyxRQUFELENBQXRCOztBQUVBLElBQUlDLElBQUksR0FBRSxJQUFJRixNQUFKLENBQ047QUFDSUcsRUFBQUEsSUFBSSxFQUFFLFdBRFY7QUFFSUMsRUFBQUEsSUFBSSxFQUFFLElBRlY7QUFHSUMsRUFBQUEsSUFBSSxFQUFFLE1BSFY7QUFJSUMsRUFBQUEsTUFBTSxFQUFFLEVBSlo7QUFLSUMsRUFBQUEsT0FBTyxFQUFFLGlCQUxiO0FBTUlDLEVBQUFBLEVBQUUsRUFBRTtBQU5SLENBRE0sQ0FBVjtBQVdBLElBQUlBLEVBQUUsR0FBR04sSUFBSSxDQUFDTyxJQUFMLENBQVUsS0FBVixFQUFnQixFQUFoQixDQUFUO0FBQ0FDLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQjtBQUNiQyxFQUFBQSxRQUFRLEVBQUNKO0FBREksQ0FBakIiLCJzb3VyY2VSb290IjoiL1VzZXJzL2hlbGxvL0Rlc2t0b3AvS2VudGthcnQvc3VydmV5QXBpL2NvbmZpZy8iLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBteXNxbGkgPSByZXF1aXJlKCdteXNxbGknKVxuXG5sZXQgY29ubiA9bmV3IG15c3FsaShcbiAgICB7XG4gICAgICAgIGhvc3Q6ICdsb2NhbGhvc3QnLFxuICAgICAgICBwb3N0OiAzMzA2LCAgXG4gICAgICAgIHVzZXI6ICdyb290JywgIFxuICAgICAgICBwYXNzd2Q6ICcnLCAgXG4gICAgICAgIGNoYXJzZXQ6ICd1dGY4X2dlbmVyYWxfY2knLCAgXG4gICAgICAgIGRiOiAnc3VydmV5J1xuICAgICAgfVxuKVxuXG5sZXQgZGIgPSBjb25uLmVtaXQoZmFsc2UsJycpO1xubW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgZGF0YWJhc2U6ZGJcbn07Il19",
    "map": {
      "version": 3,
      "sources": [
        "helpers.js"
      ],
      "names": [
        "mysqli",
        "require",
        "conn",
        "host",
        "post",
        "user",
        "passwd",
        "charset",
        "db",
        "emit",
        "module",
        "exports",
        "database"
      ],
      "mappings": "AAAA,MAAMA,MAAM,GAAGC,OAAO,CAAC,QAAD,CAAtB;;AAEA,IAAIC,IAAI,GAAE,IAAIF,MAAJ,CACN;AACIG,EAAAA,IAAI,EAAE,WADV;AAEIC,EAAAA,IAAI,EAAE,IAFV;AAGIC,EAAAA,IAAI,EAAE,MAHV;AAIIC,EAAAA,MAAM,EAAE,EAJZ;AAKIC,EAAAA,OAAO,EAAE,iBALb;AAMIC,EAAAA,EAAE,EAAE;AANR,CADM,CAAV;AAWA,IAAIA,EAAE,GAAGN,IAAI,CAACO,IAAL,CAAU,KAAV,EAAgB,EAAhB,CAAT;AACAC,MAAM,CAACC,OAAP,GAAiB;AACbC,EAAAA,QAAQ,EAACJ;AADI,CAAjB",
      "sourceRoot": "/Users/hello/Desktop/Kentkart/surveyApi/config/",
      "sourcesContent": [
        "const mysqli = require('mysqli')\n\nlet conn =new mysqli(\n    {\n        host: 'localhost',\n        post: 3306,  \n        user: 'root',  \n        passwd: '',  \n        charset: 'utf8_general_ci',  \n        db: 'survey'\n      }\n)\n\nlet db = conn.emit(false,'');\nmodule.exports = {\n    database:db\n};"
      ]
    },
    "sourceType": "module",
    "mtime": 1601887587143
  },
  "{\"sourceRoot\":\"/Users/hello/Desktop/Kentkart/surveyApi/routes/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/hello/Desktop/Kentkart/surveyApi\",\"filename\":\"/Users/hello/Desktop/Kentkart/surveyApi/routes/users.js\",\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/hello/Desktop/Kentkart/surveyApi\",\"plugins\":[],\"presets\":[]}:7.11.6": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/hello/Desktop/Kentkart/surveyApi/routes/",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/hello/Desktop/Kentkart/surveyApi",
      "filename": "/Users/hello/Desktop/Kentkart/surveyApi/routes/users.js",
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/hello/Desktop/Kentkart/surveyApi",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/hello/Desktop/Kentkart/surveyApi/routes/users.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "/Users/hello/Desktop/Kentkart/surveyApi/routes/users.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/hello/Desktop/Kentkart/surveyApi/routes/",
        "sourceFileName": "users.js"
      }
    },
    "ast": null,
    "code": "var express = require('express');\n\nvar router = express.Router();\n\nvar md5 = require('md5');\n\nconst {\n  v4: uuidv4\n} = require('uuid');\n\nconst {\n  database\n} = require('../config/helpers');\n\nvar jwt = require('jsonwebtoken');\n\nconst authReqAdmin = 123123;\n/* GET home page. */\n\nrouter.get('/', function (req, res, next) {\n  database.query(`select * from users where authority != ${authReqAdmin} `).then(result => {\n    res.send(result);\n  }).catch(err => {\n    res.status(200).send('Something went wrongss !!');\n  });\n});\nrouter.post('/delete', (req, res, next) => {\n  let userId = req.body.userId;\n  database.query(`delete from users where id=${userId}`).then(result => {\n    res.status(200).send({\n      success: true\n    });\n  }).catch(err => {\n    console.log(err);\n    res.status(300).send({\n      success: false\n    });\n  });\n});\nrouter.post('/login', function (req, res, next) {\n  let user = req.body;\n\n  if (user.username) {\n    database.query(`select * from users where username=\"${user.username}\" and password = \"${md5(user.password)}\"`).then(result => {\n      if (result.length > 0) {\n        res.status(200).send({\n          result: jwt.sign(JSON.stringify(result), 'shhhhh')\n        });\n      } else res.status(200).send({\n        err: 'Kullanici bulunamadi'\n      });\n    }).catch(err => console.log(err));\n  } else res.send('Failed');\n}); // Kullaniciya atanan anketi kaldirir\n\nrouter.post('/removeAssign', function (req, res, next) {\n  let assignId = req.body.assignId;\n\n  if (assignId) {\n    database.query(`delete from surveyAssign where id=${assignId}`).then(result => {\n      if (result) {\n        res.status(200).send({\n          success: true\n        });\n      }\n    }).catch(err => {\n      res.send({\n        success: false\n      });\n      console.log(err);\n    });\n  } else res.send({\n    success: false\n  });\n});\nrouter.post('/register', function (req, res, next) {\n  let user = req.body;\n\n  if (user.username && user.department) {\n    database.query(`insert into users (username,department,password) values (\"${user.username}\",\"${user.department}\",\"${md5(user.password)}\")`).then((result, err) => {\n      if (result) {\n        res.status(200).send({\n          success: true\n        });\n      }\n    }).catch(err => {\n      console.log(err);\n      res.status(200).send({\n        success: false\n      });\n    });\n  } else res.send({\n    success: false\n  });\n});\nrouter.post('/results', (req, res, next) => {\n  console.log(req.body);\n  let {\n    captionId,\n    id,\n    userId\n  } = req.body; // database.query(`select sc.surveyTitle,a.id, u.username,s.surveyQuestion, sa.answer from answers a join survey s on a.questionId = s.id join surveyAnswers sa on a.answerId = sa.id join users u on a.surveyUserId = u.id join surveyCaption sc on sc.id=s.surveyCaptionId where userId = ${id} order by username,sc.surveyTitle desc`).then(result =>{\n\n  database.query(`select sc.surveyTitle,a.id, u.username,s.surveyQuestion, sa.answer,sa.score from answers a join survey s on a.questionId = s.id join surveyAnswers sa on a.answerId = sa.id join users u on a.surveyUserId = u.id join surveyCaption sc on sc.id=s.surveyCaptionId where userId =${userId} and sc.id = ${captionId} and u.id = ${id} order by username,sc.surveyTitle`).then(result => {\n    res.status(200).send(result);\n  }).catch(err => {\n    res.status(300).send({\n      error: 'Something went wrong !!'\n    });\n  });\n});\nrouter.get('/resultsById/:id', (req, res, next) => {\n  let id = req.params.id; // database.query(`select sc.surveyTitle,a.id, u.username,s.surveyQuestion, sa.answer from answers a join survey s on a.questionId = s.id join surveyAnswers sa on a.answerId = sa.id join users u on a.surveyUserId = u.id join surveyCaption sc on sc.id=s.surveyCaptionId where userId = ${id} order by username,sc.surveyTitle desc`).then(result =>{\n\n  database.query(`select sc.surveyTitle,a.id, u.username,s.surveyQuestion,sa.score, sa.answer from answers a join survey s on a.questionId = s.id join surveyAnswers sa on a.answerId = sa.id join users u on a.surveyUserId = u.id join surveyCaption sc on sc.id=s.surveyCaptionId where userId = ${id} order by username,sc.surveyTitle desc`).then(result => {\n    res.status(200).send(result);\n  }).catch(err => {\n    res.status(300).send({\n      error: 'Something went wrong !!'\n    });\n  });\n});\nrouter.get('/totalResult', (req, res) => {\n  database.query(`select u.username,u.id,count(s.id) as qCount,sum(score) as score from surveyAnswers sa join answers a on a.answerId=sa.id join users u on a.surveyUserId = u.id join survey s on s.id=a.questionId GROUP by u.username`).then(result => {\n    res.status(200).send(result);\n  }).catch(err => {\n    res.status(300).send({\n      error: 'Something went wrong !!'\n    });\n  });\n});\nrouter.get('/results/:id', (req, res, next) => {\n  let id = req.params.id; // database.query(`select sc.surveyTitle,a.id, u.username,s.surveyQuestion, sa.answer from answers a join survey s on a.questionId = s.id join surveyAnswers sa on a.answerId = sa.id join users u on a.surveyUserId = u.id join surveyCaption sc on sc.id=s.surveyCaptionId where userId = ${id} order by username,sc.surveyTitle desc`).then(result =>{\n\n  database.query(`select sc.id as captionId,sc.surveyTitle,a.userId, u.id, u.username,u.department, sum(score) as score from surveyAnswers sa join answers a on sa.id = a.answerId join surveyCaption sc on sc.id = sa.surveyCaptionId join users u on u.id= a.surveyUserId group by a.surveyUserId,captionId,userId having userId =${id}`).then(result => {\n    res.status(200).send(result);\n  }).catch(err => {\n    res.status(300).send({\n      error: 'Something went wrong !!'\n    });\n  });\n});\nrouter.get('/resultUser', (req, res, next) => {\n  database.query(`select * from users where id in(SELECT userId FROM answers GROUP by userId)`).then(result => {\n    res.send(result);\n  }).catch(err => {\n    res.status(300).send({\n      error: 'Something went wrong !!'\n    });\n  });\n});\nrouter.get('/:userId', (req, res, next) => {\n  let finalResult = [],\n      temp = [];\n  userId = req.params.userId; // and u.id not in(select surveyUserId from answers where userId = ${userId})\n\n  database.query(`select u.id as id,sa.who,sa.whom,u.department as department,sa.surveyCaptionId,u.username as username,sc.surveyTitle as surveyTitle from surveyAssign as sa join users u on u.id=sa.whom join surveyCaption sc on sc.id = sa.surveyCaptionId where sa.who = ${userId}  order by u.username`).then(result => {\n    database.query(`SELECT * FROM answers WHERE userid=${userId}`).then(item => {\n      if (item.length == 0) res.send(result);\n      console.log(result);\n      item.forEach(i => {\n        // temp.push(result.filter(element=>element.surveyCaptionId != i.surveyCaptionId || element.whom != i.surveyUserId))\n        let existIndex = result.findIndex(element => element.surveyCaptionId == i.surveyCaptionId && element.whom == i.surveyUserId);\n        console.log(\"silindi\", existIndex);\n        if (existIndex >= 0) result.splice(existIndex, 1);\n        console.log(result); //    temp.forEach(e => {\n        //     finalResult.push(e)\n        //     });\n        // temp.length = 0;\n      });\n    }).then(() => {\n      res.send(result);\n    }).catch(err => {\n      console.log(err);\n      res.send({\n        success: false\n      });\n    });\n  }).catch(err => {\n    res.status(300).send('Something went wrong !!');\n    console.log(err);\n  });\n});\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXJzLmpzIl0sIm5hbWVzIjpbImV4cHJlc3MiLCJyZXF1aXJlIiwicm91dGVyIiwiUm91dGVyIiwibWQ1IiwidjQiLCJ1dWlkdjQiLCJkYXRhYmFzZSIsImp3dCIsImF1dGhSZXFBZG1pbiIsImdldCIsInJlcSIsInJlcyIsIm5leHQiLCJxdWVyeSIsInRoZW4iLCJyZXN1bHQiLCJzZW5kIiwiY2F0Y2giLCJlcnIiLCJzdGF0dXMiLCJwb3N0IiwidXNlcklkIiwiYm9keSIsInN1Y2Nlc3MiLCJjb25zb2xlIiwibG9nIiwidXNlciIsInVzZXJuYW1lIiwicGFzc3dvcmQiLCJsZW5ndGgiLCJzaWduIiwiSlNPTiIsInN0cmluZ2lmeSIsImFzc2lnbklkIiwiZGVwYXJ0bWVudCIsImNhcHRpb25JZCIsImlkIiwiZXJyb3IiLCJwYXJhbXMiLCJmaW5hbFJlc3VsdCIsInRlbXAiLCJpdGVtIiwiZm9yRWFjaCIsImkiLCJleGlzdEluZGV4IiwiZmluZEluZGV4IiwiZWxlbWVudCIsInN1cnZleUNhcHRpb25JZCIsIndob20iLCJzdXJ2ZXlVc2VySWQiLCJzcGxpY2UiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQSxJQUFJQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxTQUFELENBQXJCOztBQUNBLElBQUlDLE1BQU0sR0FBR0YsT0FBTyxDQUFDRyxNQUFSLEVBQWI7O0FBQ0EsSUFBSUMsR0FBRyxHQUFHSCxPQUFPLENBQUMsS0FBRCxDQUFqQjs7QUFDQSxNQUFNO0FBQUVJLEVBQUFBLEVBQUUsRUFBRUM7QUFBTixJQUFpQkwsT0FBTyxDQUFDLE1BQUQsQ0FBOUI7O0FBQ0EsTUFBTTtBQUFFTSxFQUFBQTtBQUFGLElBQWVOLE9BQU8sQ0FBQyxtQkFBRCxDQUE1Qjs7QUFDQSxJQUFJTyxHQUFHLEdBQUdQLE9BQU8sQ0FBQyxjQUFELENBQWpCOztBQUNBLE1BQU1RLFlBQVksR0FBQyxNQUFuQjtBQUNBOztBQUNBUCxNQUFNLENBQUNRLEdBQVAsQ0FB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Iiwic291cmNlc0NvbnRlbnQiOlsidmFyIGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XG52YXIgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTsgXG52YXIgbWQ1ID0gcmVxdWlyZSgnbWQ1Jyk7XG5jb25zdCB7IHY0OiB1dWlkdjQgfSA9IHJlcXVpcmUoJ3V1aWQnKTtcbmNvbnN0IHsgZGF0YWJhc2UgfSA9IHJlcXVpcmUoJy4uL2NvbmZpZy9oZWxwZXJzJylcbnZhciBqd3QgPSByZXF1aXJlKCdqc29ud2VidG9rZW4nKTsgXG5jb25zdCBhdXRoUmVxQWRtaW49MTIzMTIzXG4vKiBHRVQgaG9tZSBwYWdlLiAqL1xucm91dGVyLmdldCgnLycsIGZ1bmN0aW9uKHJlcSwgcmVzLCBuZXh0KSB7XG4gIFxuICAgIGRhdGFiYXNlLnF1ZXJ5KGBzZWxlY3QgKiBmcm9tIHVzZXJzIHdoZXJlIGF1dGhvcml0eSAhPSAke2F1dGhSZXFBZG1pbn0gYCkudGhlbihyZXN1bHQgPT4ge1xuICAgICAgICByZXMuc2VuZChyZXN1bHQpXG4gICAgfSkuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLnNlbmQoJ1NvbWV0aGluZyB3ZW50IHdyb25nc3MgISEnKVxuICAgIH0pXG4gICAgXG59KTtcblxucm91dGVyLnBvc3QoJy9kZWxldGUnLChyZXEscmVzLG5leHQpPT5cbnsgXG4gICAgbGV0IHVzZXJJZCA9IHJlcS5ib2R5LnVzZXJJZFxuICAgIGRhdGFiYXNlLnF1ZXJ5KGBkZWxldGUgZnJvbSB1c2VycyB3aGVyZSBpZD0ke3VzZXJJZH1gKS50aGVuKHJlc3VsdD0+XG4gICAgICAgIHtcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLnNlbmQoe3N1Y2Nlc3M6dHJ1ZX0pXG4gICAgfSkuY2F0Y2goZXJyPT57XG4gICAgICAgIGNvbnNvbGUubG9nKGVycilcbiAgICAgICAgcmVzLnN0YXR1cygzMDApLnNlbmQoe3N1Y2Nlc3M6ZmFsc2V9KVxuICAgIH0pXG59KVxuXG5yb3V0ZXIucG9zdCgnL2xvZ2luJyxmdW5jdGlvbiAocmVxLHJlcyxuZXh0KSB7IFxuICAgXG4gICAgbGV0IHVzZXIgPSByZXEuYm9keVxuICAgIGlmKHVzZXIudXNlcm5hbWUpXG4gICAge1xuICAgICAgICBkYXRhYmFzZS5xdWVyeShgc2VsZWN0ICogZnJvbSB1c2VycyB3aGVyZSB1c2VybmFtZT1cIiR7dXNlci51c2VybmFtZX1cIiBhbmQgcGFzc3dvcmQgPSBcIiR7bWQ1KHVzZXIucGFzc3dvcmQpfVwiYClcbiAgICAgICAgLnRoZW4ocmVzdWx0ID0+IHtcbiAgICAgICAgICAgIGlmKHJlc3VsdC5sZW5ndGg+MClcbiAgICAgICAgICAgIHsgXG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLnNlbmQoe3Jlc3VsdDpqd3Quc2lnbihKU09OLnN0cmluZ2lmeShyZXN1bHQpLCAnc2hoaGhoJyl9KVxuICAgICAgICAgICAgfWVsc2VcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5zZW5kKHtlcnI6J0t1bGxhbmljaSBidWx1bmFtYWRpJ30pXG4gICAgICAgIH0pLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKVxuICAgIH1lbHNlXG4gICAgcmVzLnNlbmQoJ0ZhaWxlZCcpXG59KVxuLy8gS3VsbGFuaWNpeWEgYXRhbmFuIGFua2V0aSBrYWxkaXJpclxucm91dGVyLnBvc3QoJy9yZW1vdmVBc3NpZ24nLGZ1bmN0aW9uIChyZXEscmVzLG5leHQpIHsgXG4gICAgbGV0IGFzc2lnbklkID0gcmVxLmJvZHkuYXNzaWduSWQgXG4gICAgaWYoYXNzaWduSWQpXG4gICAge1xuICAgICAgICBkYXRhYmFzZS5xdWVyeShgZGVsZXRlIGZyb20gc3VydmV5QXNzaWduIHdoZXJlIGlkPSR7YXNzaWduSWR9YClcbiAgICAgICAgLnRoZW4ocmVzdWx0ID0+IHtcbiAgICAgICAgICAgIGlmKHJlc3VsdClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuc2VuZCh7c3VjY2Vzczp0cnVlfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkuY2F0Y2goZXJyID0+XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICByZXMuc2VuZCh7c3VjY2VzczpmYWxzZX0pXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpXG4gICAgICAgICAgICB9KVxuICAgIH1lbHNlXG4gICAgcmVzLnNlbmQoe3N1Y2Nlc3M6ZmFsc2V9KVxufSlcblxucm91dGVyLnBvc3QoJy9yZWdpc3RlcicsIGZ1bmN0aW9uKHJlcSwgcmVzLCBuZXh0KSB7XG4gICAgbGV0IHVzZXIgPSByZXEuYm9keTsgIFxuICAgIGlmKHVzZXIudXNlcm5hbWUgJiYgdXNlci5kZXBhcnRtZW50KVxuICAgIHtcbiAgICAgICAgXG4gICAgICAgIGRhdGFiYXNlLnF1ZXJ5KGBpbnNlcnQgaW50byB1c2VycyAodXNlcm5hbWUsZGVwYXJ0bWVudCxwYXNzd29yZCkgdmFsdWVzIChcIiR7dXNlci51c2VybmFtZX1cIixcIiR7dXNlci5kZXBhcnRtZW50fVwiLFwiJHttZDUodXNlci5wYXNzd29yZCl9XCIpYClcbiAgICAgICAgLnRoZW4oKHJlc3VsdCxlcnIpID0+IHsgXG4gICAgICAgICAgICBpZihyZXN1bHQpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLnNlbmQoe3N1Y2Nlc3M6dHJ1ZX0pXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSkuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycilcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5zZW5kKHtzdWNjZXNzOmZhbHNlfSlcbiAgICAgICAgfSlcbiAgICB9ZWxzZVxuICAgIHJlcy5zZW5kKHtzdWNjZXNzOmZhbHNlfSkgXG4gICAgXG59KTtcblxucm91dGVyLnBvc3QoJy9yZXN1bHRzJywocmVxLHJlcyxuZXh0KT0+XG57XG4gICAgY29uc29sZS5sb2cocmVxLmJvZHkpXG4gICAgbGV0IHsgY2FwdGlvbklkLGlkLHVzZXJJZCB9ID0gcmVxLmJvZHk7IFxuICAgIC8vIGRhdGFiYXNlLnF1ZXJ5KGBzZWxlY3Qgc2Muc3VydmV5VGl0bGUsYS5pZCwgdS51c2VybmFtZSxzLnN1cnZleVF1ZXN0aW9uLCBzYS5hbnN3ZXIgZnJvbSBhbnN3ZXJzIGEgam9pbiBzdXJ2ZXkgcyBvbiBhLnF1ZXN0aW9uSWQgPSBzLmlkIGpvaW4gc3VydmV5QW5zd2VycyBzYSBvbiBhLmFuc3dlcklkID0gc2EuaWQgam9pbiB1c2VycyB1IG9uIGEuc3VydmV5VXNlcklkID0gdS5pZCBqb2luIHN1cnZleUNhcHRpb24gc2Mgb24gc2MuaWQ9cy5zdXJ2ZXlDYXB0aW9uSWQgd2hlcmUgdXNlcklkID0gJHtpZH0gb3JkZXIgYnkgdXNlcm5hbWUsc2Muc3VydmV5VGl0bGUgZGVzY2ApLnRoZW4ocmVzdWx0ID0+e1xuICAgIGRhdGFiYXNlLnF1ZXJ5KGBzZWxlY3Qgc2Muc3VydmV5VGl0bGUsYS5pZCwgdS51c2VybmFtZSxzLnN1cnZleVF1ZXN0aW9uLCBzYS5hbnN3ZXIsc2Euc2NvcmUgZnJvbSBhbnN3ZXJzIGEgam9pbiBzdXJ2ZXkgcyBvbiBhLnF1ZXN0aW9uSWQgPSBzLmlkIGpvaW4gc3VydmV5QW5zd2VycyBzYSBvbiBhLmFuc3dlcklkID0gc2EuaWQgam9pbiB1c2VycyB1IG9uIGEuc3VydmV5VXNlcklkID0gdS5pZCBqb2luIHN1cnZleUNhcHRpb24gc2Mgb24gc2MuaWQ9cy5zdXJ2ZXlDYXB0aW9uSWQgd2hlcmUgdXNlcklkID0ke3VzZXJJZH0gYW5kIHNjLmlkID0gJHtjYXB0aW9uSWR9IGFuZCB1LmlkID0gJHtpZH0gb3JkZXIgYnkgdXNlcm5hbWUsc2Muc3VydmV5VGl0bGVgKVxuICAgIC50aGVuKHJlc3VsdCA9PnsgICBcbiAgICByZXMuc3RhdHVzKDIwMCkuc2VuZChyZXN1bHQpXG4gICAgfSkuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgcmVzLnN0YXR1cygzMDApLnNlbmQoe2Vycm9yOidTb21ldGhpbmcgd2VudCB3cm9uZyAhISd9KVxuICAgIH0pXG5cblxufSlcblxuXG5yb3V0ZXIuZ2V0KCcvcmVzdWx0c0J5SWQvOmlkJywocmVxLHJlcyxuZXh0KT0+XG57XG4gICAgbGV0IGlkID0gcmVxLnBhcmFtcy5pZDtcbiAgICAvLyBkYXRhYmFzZS5xdWVyeShgc2VsZWN0IHNjLnN1cnZleVRpdGxlLGEuaWQsIHUudXNlcm5hbWUscy5zdXJ2ZXlRdWVzdGlvbiwgc2EuYW5zd2VyIGZyb20gYW5zd2VycyBhIGpvaW4gc3VydmV5IHMgb24gYS5xdWVzdGlvbklkID0gcy5pZCBqb2luIHN1cnZleUFuc3dlcnMgc2Egb24gYS5hbnN3ZXJJZCA9IHNhLmlkIGpvaW4gdXNlcnMgdSBvbiBhLnN1cnZleVVzZXJJZCA9IHUuaWQgam9pbiBzdXJ2ZXlDYXB0aW9uIHNjIG9uIHNjLmlkPXMuc3VydmV5Q2FwdGlvbklkIHdoZXJlIHVzZXJJZCA9ICR7aWR9IG9yZGVyIGJ5IHVzZXJuYW1lLHNjLnN1cnZleVRpdGxlIGRlc2NgKS50aGVuKHJlc3VsdCA9PntcbiAgICBkYXRhYmFzZS5xdWVyeShgc2VsZWN0IHNjLnN1cnZleVRpdGxlLGEuaWQsIHUudXNlcm5hbWUscy5zdXJ2ZXlRdWVzdGlvbixzYS5zY29yZSwgc2EuYW5zd2VyIGZyb20gYW5zd2VycyBhIGpvaW4gc3VydmV5IHMgb24gYS5xdWVzdGlvbklkID0gcy5pZCBqb2luIHN1cnZleUFuc3dlcnMgc2Egb24gYS5hbnN3ZXJJZCA9IHNhLmlkIGpvaW4gdXNlcnMgdSBvbiBhLnN1cnZleVVzZXJJZCA9IHUuaWQgam9pbiBzdXJ2ZXlDYXB0aW9uIHNjIG9uIHNjLmlkPXMuc3VydmV5Q2FwdGlvbklkIHdoZXJlIHVzZXJJZCA9ICR7aWR9IG9yZGVyIGJ5IHVzZXJuYW1lLHNjLnN1cnZleVRpdGxlIGRlc2NgKVxuICAgIC50aGVuKHJlc3VsdCA9PnsgICBcbiAgICByZXMuc3RhdHVzKDIwMCkuc2VuZChyZXN1bHQpXG4gICAgfSkuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgcmVzLnN0YXR1cygzMDApLnNlbmQoe2Vycm9yOidTb21ldGhpbmcgd2VudCB3cm9uZyAhISd9KVxuICAgIH0pXG5cblxufSlcbnJvdXRlci5nZXQoJy90b3RhbFJlc3VsdCcsIChyZXEscmVzKT0+XG57IFxuICAgICBkYXRhYmFzZS5xdWVyeShgc2VsZWN0IHUudXNlcm5hbWUsdS5pZCxjb3VudChzLmlkKSBhcyBxQ291bnQsc3VtKHNjb3JlKSBhcyBzY29yZSBmcm9tIHN1cnZleUFuc3dlcnMgc2Egam9pbiBhbnN3ZXJzIGEgb24gYS5hbnN3ZXJJZD1zYS5pZCBqb2luIHVzZXJzIHUgb24gYS5zdXJ2ZXlVc2VySWQgPSB1LmlkIGpvaW4gc3VydmV5IHMgb24gcy5pZD1hLnF1ZXN0aW9uSWQgR1JPVVAgYnkgdS51c2VybmFtZWApXG4gICAgLnRoZW4ocmVzdWx0ID0+eyAgIFxuICAgIHJlcy5zdGF0dXMoMjAwKS5zZW5kKHJlc3VsdClcbiAgICB9KS5jYXRjaChlcnIgPT4ge1xuICAgICAgICByZXMuc3RhdHVzKDMwMCkuc2VuZCh7ZXJyb3I6J1NvbWV0aGluZyB3ZW50IHdyb25nICEhJ30pXG4gICAgfSlcbn0pXG5yb3V0ZXIuZ2V0KCcvcmVzdWx0cy86aWQnLChyZXEscmVzLG5leHQpPT5cbntcbiAgICBsZXQgaWQgPSByZXEucGFyYW1zLmlkO1xuICAgIC8vIGRhdGFiYXNlLnF1ZXJ5KGBzZWxlY3Qgc2Muc3VydmV5VGl0bGUsYS5pZCwgdS51c2VybmFtZSxzLnN1cnZleVF1ZXN0aW9uLCBzYS5hbnN3ZXIgZnJvbSBhbnN3ZXJzIGEgam9pbiBzdXJ2ZXkgcyBvbiBhLnF1ZXN0aW9uSWQgPSBzLmlkIGpvaW4gc3VydmV5QW5zd2VycyBzYSBvbiBhLmFuc3dlcklkID0gc2EuaWQgam9pbiB1c2VycyB1IG9uIGEuc3VydmV5VXNlcklkID0gdS5pZCBqb2luIHN1cnZleUNhcHRpb24gc2Mgb24gc2MuaWQ9cy5zdXJ2ZXlDYXB0aW9uSWQgd2hlcmUgdXNlcklkID0gJHtpZH0gb3JkZXIgYnkgdXNlcm5hbWUsc2Muc3VydmV5VGl0bGUgZGVzY2ApLnRoZW4ocmVzdWx0ID0+e1xuICAgIGRhdGFiYXNlLnF1ZXJ5KGBzZWxlY3Qgc2MuaWQgYXMgY2FwdGlvbklkLHNjLnN1cnZleVRpdGxlLGEudXNlcklkLCB1LmlkLCB1LnVzZXJuYW1lLHUuZGVwYXJ0bWVudCwgc3VtKHNjb3JlKSBhcyBzY29yZSBmcm9tIHN1cnZleUFuc3dlcnMgc2Egam9pbiBhbnN3ZXJzIGEgb24gc2EuaWQgPSBhLmFuc3dlcklkIGpvaW4gc3VydmV5Q2FwdGlvbiBzYyBvbiBzYy5pZCA9IHNhLnN1cnZleUNhcHRpb25JZCBqb2luIHVzZXJzIHUgb24gdS5pZD0gYS5zdXJ2ZXlVc2VySWQgZ3JvdXAgYnkgYS5zdXJ2ZXlVc2VySWQsY2FwdGlvbklkLHVzZXJJZCBoYXZpbmcgdXNlcklkID0ke2lkfWApXG4gICAgLnRoZW4ocmVzdWx0ID0+eyAgIFxuICAgIHJlcy5zdGF0dXMoMjAwKS5zZW5kKHJlc3VsdClcbiAgICB9KS5jYXRjaChlcnIgPT4ge1xuICAgICAgICByZXMuc3RhdHVzKDMwMCkuc2VuZCh7ZXJyb3I6J1NvbWV0aGluZyB3ZW50IHdyb25nICEhJ30pXG4gICAgfSlcblxuXG59KVxucm91dGVyLmdldCgnL3Jlc3VsdFVzZXInLChyZXEscmVzLG5leHQpID0+XG57IFxuICAgIGRhdGFiYXNlLnF1ZXJ5KGBzZWxlY3QgKiBmcm9tIHVzZXJzIHdoZXJlIGlkIGluKFNFTEVDVCB1c2VySWQgRlJPTSBhbnN3ZXJzIEdST1VQIGJ5IHVzZXJJZClgKS50aGVuKHJlc3VsdCA9PiB7XG4gICAgICAgIHJlcy5zZW5kKHJlc3VsdClcbiAgICB9KS5jYXRjaChlcnIgPT4ge1xuICAgICAgICByZXMuc3RhdHVzKDMwMCkuc2VuZCh7ZXJyb3I6J1NvbWV0aGluZyB3ZW50IHdyb25nICEhJ30pXG4gICAgfSlcbn0pXG5yb3V0ZXIuZ2V0KCcvOnVzZXJJZCcsKHJlcSxyZXMsbmV4dCk9PlxueyBsZXQgZmluYWxSZXN1bHQgPSBbXSx0ZW1wID0gW11cbiAgICB1c2VySWQgPSByZXEucGFyYW1zLnVzZXJJZDsgIFxuXG4gICAgLy8gYW5kIHUuaWQgbm90IGluKHNlbGVjdCBzdXJ2ZXlVc2VySWQgZnJvbSBhbnN3ZXJzIHdoZXJlIHVzZXJJZCA9ICR7dXNlcklkfSlcbiAgICBkYXRhYmFzZS5xdWVyeShgc2VsZWN0IHUuaWQgYXMgaWQsc2Eud2hvLHNhLndob20sdS5kZXBhcnRtZW50IGFzIGRlcGFydG1lbnQsc2Euc3VydmV5Q2FwdGlvbklkLHUudXNlcm5hbWUgYXMgdXNlcm5hbWUsc2Muc3VydmV5VGl0bGUgYXMgc3VydmV5VGl0bGUgZnJvbSBzdXJ2ZXlBc3NpZ24gYXMgc2Egam9pbiB1c2VycyB1IG9uIHUuaWQ9c2Eud2hvbSBqb2luIHN1cnZleUNhcHRpb24gc2Mgb24gc2MuaWQgPSBzYS5zdXJ2ZXlDYXB0aW9uSWQgd2hlcmUgc2Eud2hvID0gJHt1c2VySWR9ICBvcmRlciBieSB1LnVzZXJuYW1lYClcbiAgICAudGhlbihyZXN1bHQgPT4ge1xuICAgICAgICBcbiAgICAgICAgZGF0YWJhc2UucXVlcnkoYFNFTEVDVCAqIEZST00gYW5zd2VycyBXSEVSRSB1c2VyaWQ9JHt1c2VySWR9YCkudGhlbihpdGVtID0+eyBcbiAgICAgICAgICAgIGlmKGl0ZW0ubGVuZ3RoID09IDApXG4gICAgICAgICAgICByZXMuc2VuZChyZXN1bHQpIFxuICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KVxuICAgICAgICAgICAgaXRlbS5mb3JFYWNoKGkgPT4ge1xuICAgICAgICAgICAgLy8gdGVtcC5wdXNoKHJlc3VsdC5maWx0ZXIoZWxlbWVudD0+ZWxlbWVudC5zdXJ2ZXlDYXB0aW9uSWQgIT0gaS5zdXJ2ZXlDYXB0aW9uSWQgfHwgZWxlbWVudC53aG9tICE9IGkuc3VydmV5VXNlcklkKSlcbiAgICAgICAgICAgIGxldCBleGlzdEluZGV4ID0gKHJlc3VsdC5maW5kSW5kZXgoZWxlbWVudD0+ZWxlbWVudC5zdXJ2ZXlDYXB0aW9uSWQgPT0gaS5zdXJ2ZXlDYXB0aW9uSWQgJiYgZWxlbWVudC53aG9tID09IGkuc3VydmV5VXNlcklkKSlcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwic2lsaW5kaVwiLGV4aXN0SW5kZXgpXG4gICAgICAgICAgICBpZihleGlzdEluZGV4ID49MClcbiAgICAgICAgICAgIHJlc3VsdC5zcGxpY2UoZXhpc3RJbmRleCwxKVxuXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpXG4gICAgICAgICAgICAvLyAgICB0ZW1wLmZvckVhY2goZSA9PiB7XG4gICAgICAgICAgICAvLyAgICAgZmluYWxSZXN1bHQucHVzaChlKVxuICAgICAgICAgICAgLy8gICAgIH0pO1xuICAgICAgICAgICAgLy8gdGVtcC5sZW5ndGggPSAwO1xuICAgICAgICAgICAgfSkgXG4gICAgICAgIH0pLnRoZW4oKCk9PnsgICBcbiAgICAgICAgICAgIHJlcy5zZW5kKHJlc3VsdClcbiAgICAgICAgfSkuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycilcbiAgICAgICAgICAgIHJlcy5zZW5kKHtzdWNjZXNzOmZhbHNlfSlcbiAgICAgICAgfSlcbiAgICB9KS5jYXRjaChlcnIgPT4ge1xuICAgICAgICByZXMuc3RhdHVzKDMwMCkuc2VuZCgnU29tZXRoaW5nIHdlbnQgd3JvbmcgISEnKVxuICAgICAgICBjb25zb2xlLmxvZyhlcnIpXG4gICAgfSkgXG59KVxuXG5cbm1vZHVsZS5leHBvcnRzID0gcm91dGVyO1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "users.js"
      ],
      "names": [
        "express",
        "require",
        "router",
        "Router",
        "md5",
        "v4",
        "uuidv4",
        "database",
        "jwt",
        "authReqAdmin",
        "get",
        "req",
        "res",
        "next",
        "query",
        "then",
        "result",
        "send",
        "catch",
        "err",
        "status",
        "post",
        "userId",
        "body",
        "success",
        "console",
        "log",
        "user",
        "username",
        "password",
        "length",
        "sign",
        "JSON",
        "stringify",
        "assignId",
        "department",
        "captionId",
        "id",
        "error",
        "params",
        "finalResult",
        "temp",
        "item",
        "forEach",
        "i",
        "existIndex",
        "findIndex",
        "element",
        "surveyCaptionId",
        "whom",
        "surveyUserId",
        "splice",
        "module",
        "exports"
      ],
      "mappings": "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",
      "sourceRoot": "/Users/hello/Desktop/Kentkart/surveyApi/routes/",
      "sourcesContent": [
        "var express = require('express');\nvar router = express.Router(); \nvar md5 = require('md5');\nconst { v4: uuidv4 } = require('uuid');\nconst { database } = require('../config/helpers')\nvar jwt = require('jsonwebtoken'); \nconst authReqAdmin=123123\n/* GET home page. */\nrouter.get('/', function(req, res, next) {\n  \n    database.query(`select * from users where authority != ${authReqAdmin} `).then(result => {\n        res.send(result)\n    }).catch(err => {\n        res.status(200).send('Something went wrongss !!')\n    })\n    \n});\n\nrouter.post('/delete',(req,res,next)=>\n{ \n    let userId = req.body.userId\n    database.query(`delete from users where id=${userId}`).then(result=>\n        {\n        res.status(200).send({success:true})\n    }).catch(err=>{\n        console.log(err)\n        res.status(300).send({success:false})\n    })\n})\n\nrouter.post('/login',function (req,res,next) { \n   \n    let user = req.body\n    if(user.username)\n    {\n        database.query(`select * from users where username=\"${user.username}\" and password = \"${md5(user.password)}\"`)\n        .then(result => {\n            if(result.length>0)\n            { \n                res.status(200).send({result:jwt.sign(JSON.stringify(result), 'shhhhh')})\n            }else\n            res.status(200).send({err:'Kullanici bulunamadi'})\n        }).catch(err => console.log(err))\n    }else\n    res.send('Failed')\n})\n// Kullaniciya atanan anketi kaldirir\nrouter.post('/removeAssign',function (req,res,next) { \n    let assignId = req.body.assignId \n    if(assignId)\n    {\n        database.query(`delete from surveyAssign where id=${assignId}`)\n        .then(result => {\n            if(result)\n            {\n                res.status(200).send({success:true})\n            }\n        }).catch(err =>\n            {\n            res.send({success:false})\n            console.log(err)\n            })\n    }else\n    res.send({success:false})\n})\n\nrouter.post('/register', function(req, res, next) {\n    let user = req.body;  \n    if(user.username && user.department)\n    {\n        \n        database.query(`insert into users (username,department,password) values (\"${user.username}\",\"${user.department}\",\"${md5(user.password)}\")`)\n        .then((result,err) => { \n            if(result)\n            {\n                res.status(200).send({success:true})\n            }\n\n        }).catch(err => {\n            console.log(err)\n            res.status(200).send({success:false})\n        })\n    }else\n    res.send({success:false}) \n    \n});\n\nrouter.post('/results',(req,res,next)=>\n{\n    console.log(req.body)\n    let { captionId,id,userId } = req.body; \n    // database.query(`select sc.surveyTitle,a.id, u.username,s.surveyQuestion, sa.answer from answers a join survey s on a.questionId = s.id join surveyAnswers sa on a.answerId = sa.id join users u on a.surveyUserId = u.id join surveyCaption sc on sc.id=s.surveyCaptionId where userId = ${id} order by username,sc.surveyTitle desc`).then(result =>{\n    database.query(`select sc.surveyTitle,a.id, u.username,s.surveyQuestion, sa.answer,sa.score from answers a join survey s on a.questionId = s.id join surveyAnswers sa on a.answerId = sa.id join users u on a.surveyUserId = u.id join surveyCaption sc on sc.id=s.surveyCaptionId where userId =${userId} and sc.id = ${captionId} and u.id = ${id} order by username,sc.surveyTitle`)\n    .then(result =>{   \n    res.status(200).send(result)\n    }).catch(err => {\n        res.status(300).send({error:'Something went wrong !!'})\n    })\n\n\n})\n\n\nrouter.get('/resultsById/:id',(req,res,next)=>\n{\n    let id = req.params.id;\n    // database.query(`select sc.surveyTitle,a.id, u.username,s.surveyQuestion, sa.answer from answers a join survey s on a.questionId = s.id join surveyAnswers sa on a.answerId = sa.id join users u on a.surveyUserId = u.id join surveyCaption sc on sc.id=s.surveyCaptionId where userId = ${id} order by username,sc.surveyTitle desc`).then(result =>{\n    database.query(`select sc.surveyTitle,a.id, u.username,s.surveyQuestion,sa.score, sa.answer from answers a join survey s on a.questionId = s.id join surveyAnswers sa on a.answerId = sa.id join users u on a.surveyUserId = u.id join surveyCaption sc on sc.id=s.surveyCaptionId where userId = ${id} order by username,sc.surveyTitle desc`)\n    .then(result =>{   \n    res.status(200).send(result)\n    }).catch(err => {\n        res.status(300).send({error:'Something went wrong !!'})\n    })\n\n\n})\nrouter.get('/totalResult', (req,res)=>\n{ \n     database.query(`select u.username,u.id,count(s.id) as qCount,sum(score) as score from surveyAnswers sa join answers a on a.answerId=sa.id join users u on a.surveyUserId = u.id join survey s on s.id=a.questionId GROUP by u.username`)\n    .then(result =>{   \n    res.status(200).send(result)\n    }).catch(err => {\n        res.status(300).send({error:'Something went wrong !!'})\n    })\n})\nrouter.get('/results/:id',(req,res,next)=>\n{\n    let id = req.params.id;\n    // database.query(`select sc.surveyTitle,a.id, u.username,s.surveyQuestion, sa.answer from answers a join survey s on a.questionId = s.id join surveyAnswers sa on a.answerId = sa.id join users u on a.surveyUserId = u.id join surveyCaption sc on sc.id=s.surveyCaptionId where userId = ${id} order by username,sc.surveyTitle desc`).then(result =>{\n    database.query(`select sc.id as captionId,sc.surveyTitle,a.userId, u.id, u.username,u.department, sum(score) as score from surveyAnswers sa join answers a on sa.id = a.answerId join surveyCaption sc on sc.id = sa.surveyCaptionId join users u on u.id= a.surveyUserId group by a.surveyUserId,captionId,userId having userId =${id}`)\n    .then(result =>{   \n    res.status(200).send(result)\n    }).catch(err => {\n        res.status(300).send({error:'Something went wrong !!'})\n    })\n\n\n})\nrouter.get('/resultUser',(req,res,next) =>\n{ \n    database.query(`select * from users where id in(SELECT userId FROM answers GROUP by userId)`).then(result => {\n        res.send(result)\n    }).catch(err => {\n        res.status(300).send({error:'Something went wrong !!'})\n    })\n})\nrouter.get('/:userId',(req,res,next)=>\n{ let finalResult = [],temp = []\n    userId = req.params.userId;  \n\n    // and u.id not in(select surveyUserId from answers where userId = ${userId})\n    database.query(`select u.id as id,sa.who,sa.whom,u.department as department,sa.surveyCaptionId,u.username as username,sc.surveyTitle as surveyTitle from surveyAssign as sa join users u on u.id=sa.whom join surveyCaption sc on sc.id = sa.surveyCaptionId where sa.who = ${userId}  order by u.username`)\n    .then(result => {\n        \n        database.query(`SELECT * FROM answers WHERE userid=${userId}`).then(item =>{ \n            if(item.length == 0)\n            res.send(result) \n            console.log(result)\n            item.forEach(i => {\n            // temp.push(result.filter(element=>element.surveyCaptionId != i.surveyCaptionId || element.whom != i.surveyUserId))\n            let existIndex = (result.findIndex(element=>element.surveyCaptionId == i.surveyCaptionId && element.whom == i.surveyUserId))\n            console.log(\"silindi\",existIndex)\n            if(existIndex >=0)\n            result.splice(existIndex,1)\n\n            console.log(result)\n            //    temp.forEach(e => {\n            //     finalResult.push(e)\n            //     });\n            // temp.length = 0;\n            }) \n        }).then(()=>{   \n            res.send(result)\n        }).catch(err => {\n            console.log(err)\n            res.send({success:false})\n        })\n    }).catch(err => {\n        res.status(300).send('Something went wrong !!')\n        console.log(err)\n    }) \n})\n\n\nmodule.exports = router;\n"
      ]
    },
    "sourceType": "module",
    "mtime": 1602665104666
  },
  "{\"sourceRoot\":\"/Users/hello/Desktop/Kentkart/surveyApi/routes/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/hello/Desktop/Kentkart/surveyApi\",\"filename\":\"/Users/hello/Desktop/Kentkart/surveyApi/routes/admin.js\",\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/hello/Desktop/Kentkart/surveyApi\",\"plugins\":[],\"presets\":[]}:7.11.6": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/hello/Desktop/Kentkart/surveyApi/routes/",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/hello/Desktop/Kentkart/surveyApi",
      "filename": "/Users/hello/Desktop/Kentkart/surveyApi/routes/admin.js",
      "cloneInputAst": true,
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/hello/Desktop/Kentkart/surveyApi",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/hello/Desktop/Kentkart/surveyApi/routes/admin.js",
        "plugins": []
      },
      "generatorOpts": {
        "filename": "/Users/hello/Desktop/Kentkart/surveyApi/routes/admin.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/hello/Desktop/Kentkart/surveyApi/routes/",
        "sourceFileName": "admin.js"
      }
    },
    "ast": null,
    "code": "var express = require('express');\n\nvar router = express.Router();\n\nconst {\n  database\n} = require('../config/helpers');\n/* GET home page. */\n\n\nrouter.get('/', function (req, res, next) {\n  res.render('index', {\n    title: 'Express'\n  });\n});\nrouter.post('/surveyAssign', (req, res, next) => {\n  let result = req.body;\n  console.log(result);\n  let assigns = result.assigns;\n  let keys = Object.keys(result.assigns);\n  keys.forEach(key => {\n    console.log(assigns[key]);\n\n    if (assigns[key] === true) {\n      database.query(`insert into surveyAssign (who,whom,surveyCaptionId) values (${result.userId},${key},${assigns.surveyCaptionId})`).then((result, err) => {\n        console.log(result, err);\n      }).catch(err => console.log(err));\n    } else console.log('eklemedi');\n  });\n  res.send({\n    success: true\n  });\n});\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkbWluLmpzIl0sIm5hbWVzIjpbImV4cHJlc3MiLCJyZXF1aXJlIiwicm91dGVyIiwiUm91dGVyIiwiZGF0YWJhc2UiLCJnZXQiLCJyZXEiLCJyZXMiLCJuZXh0IiwicmVuZGVyIiwidGl0bGUiLCJwb3N0IiwicmVzdWx0IiwiYm9keSIsImNvbnNvbGUiLCJsb2ciLCJhc3NpZ25zIiwia2V5cyIsIk9iamVjdCIsImZvckVhY2giLCJrZXkiLCJxdWVyeSIsInVzZXJJZCIsInN1cnZleUNhcHRpb25JZCIsInRoZW4iLCJlcnIiLCJjYXRjaCIsInNlbmQiLCJzdWNjZXNzIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQUEsSUFBSUEsT0FBTyxHQUFHQyxPQUFPLENBQUMsU0FBRCxDQUFyQjs7QUFDQSxJQUFJQyxNQUFNLEdBQUdGLE9BQU8sQ0FBQ0csTUFBUixFQUFiOztBQUNBLE1BQU07QUFBRUMsRUFBQUE7QUFBRixJQUFlSCxPQUFPLENBQUMsbUJBQUQsQ0FBNUI7QUFFQTs7O0FBQ0FDLE1BQU0sQ0FBQ0csR0FBUCxDQUFXLEdBQVgsRUFBZ0IsVUFBU0MsR0FBVCxFQUFjQyxHQUFkLEVBQW1CQyxJQUFuQixFQUF5QjtBQUN2Q0QsRUFBQUEsR0FBRyxDQUFDRSxNQUFKLENBQVcsT0FBWCxFQUFvQjtBQUFFQyxJQUFBQSxLQUFLLEVBQUU7QUFBVCxHQUFwQjtBQUNELENBRkQ7QUFLQVIsTUFBTSxDQUFDUyxJQUFQLENBQVksZUFBWixFQUE0QixDQUFDTCxHQUFELEVBQUtDLEdBQUwsRUFBU0MsSUFBVCxLQUM1QjtBQUNJLE1BQUlJLE1BQU0sR0FBR04sR0FBRyxDQUFDTyxJQUFqQjtBQUNBQyxFQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWUgsTUFBWjtBQUNBLE1BQUlJLE9BQU8sR0FBR0osTUFBTSxDQUFDSSxPQUFyQjtBQUNBLE1BQUlDLElBQUksR0FBRUMsTUFBTSxDQUFDRCxJQUFQLENBQVlMLE1BQU0sQ0FBQ0ksT0FBbkIsQ0FBVjtBQUVJQyxFQUFBQSxJQUFJLENBQUNFLE9BQUwsQ0FBYUMsR0FBRyxJQUFHO0FBQ2ZOLElBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZQyxPQUFPLENBQUNJLEdBQUQsQ0FBbkI7O0FBQ0EsUUFBSUosT0FBTyxDQUFDSSxHQUFELENBQVAsS0FBaUIsSUFBckIsRUFDQTtBQUNJaEIsTUFBQUEsUUFBUSxDQUFDaUIsS0FBVCxDQUFnQiwrREFBOERULE1BQU0sQ0FBQ1UsTUFBTyxJQUFHRixHQUFJLElBQUdKLE9BQU8sQ0FBQ08sZUFBZ0IsR0FBOUgsRUFBa0lDLElBQWxJLENBQXVJLENBQUNaLE1BQUQsRUFBUWEsR0FBUixLQUFjO0FBQ2pKWCxRQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWUgsTUFBWixFQUFtQmEsR0FBbkI7QUFDSCxPQUZELEVBRUdDLEtBRkgsQ0FFU0QsR0FBRyxJQUFFWCxPQUFPLENBQUNDLEdBQVIsQ0FBWVUsR0FBWixDQUZkO0FBR0gsS0FMRCxNQU1LWCxPQUFPLENBQUNDLEdBQVIsQ0FBWSxVQUFaO0FBQ1IsR0FURDtBQVVBUixFQUFBQSxHQUFHLENBQUNvQixJQUFKLENBQVM7QUFBQ0MsSUFBQUEsT0FBTyxFQUFDO0FBQVQsR0FBVDtBQU9QLENBeEJEO0FBeUJBQyxNQUFNLENBQUNDLE9BQVAsR0FBaUI1QixNQUFqQiIsInNvdXJjZVJvb3QiOiIvVXNlcnMvaGVsbG8vRGVza3RvcC9LZW50a2FydC9zdXJ2ZXlBcGkvcm91dGVzLyIsInNvdXJjZXNDb250ZW50IjpbInZhciBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xudmFyIHJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XG5jb25zdCB7IGRhdGFiYXNlIH0gPSByZXF1aXJlKCcuLi9jb25maWcvaGVscGVycycpXG5cbi8qIEdFVCBob21lIHBhZ2UuICovXG5yb3V0ZXIuZ2V0KCcvJywgZnVuY3Rpb24ocmVxLCByZXMsIG5leHQpIHtcbiAgcmVzLnJlbmRlcignaW5kZXgnLCB7IHRpdGxlOiAnRXhwcmVzcycgfSk7XG59KTtcblxuXG5yb3V0ZXIucG9zdCgnL3N1cnZleUFzc2lnbicsKHJlcSxyZXMsbmV4dCk9Plxue1xuICAgIGxldCByZXN1bHQgPSByZXEuYm9keTtcbiAgICBjb25zb2xlLmxvZyhyZXN1bHQpXG4gICAgbGV0IGFzc2lnbnMgPSByZXN1bHQuYXNzaWducztcbiAgICBsZXQga2V5cz0gT2JqZWN0LmtleXMocmVzdWx0LmFzc2lnbnMpIFxuXG4gICAgICAgIGtleXMuZm9yRWFjaChrZXkgPT57XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhhc3NpZ25zW2tleV0pO1xuICAgICAgICAgICAgaWYoIGFzc2lnbnNba2V5XSA9PT0gdHJ1ZSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBkYXRhYmFzZS5xdWVyeShgaW5zZXJ0IGludG8gc3VydmV5QXNzaWduICh3aG8sd2hvbSxzdXJ2ZXlDYXB0aW9uSWQpIHZhbHVlcyAoJHtyZXN1bHQudXNlcklkfSwke2tleX0sJHthc3NpZ25zLnN1cnZleUNhcHRpb25JZH0pYCkudGhlbigocmVzdWx0LGVycik9PntcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0LGVycilcbiAgICAgICAgICAgICAgICB9KS5jYXRjaChlcnI9PmNvbnNvbGUubG9nKGVycikpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGNvbnNvbGUubG9nKCdla2xlbWVkaScpXG4gICAgICAgIH0pIFxuICAgICAgICByZXMuc2VuZCh7c3VjY2Vzczp0cnVlfSkgIFxuICAgIFxuICAgICBcbiAgICBcbiAgICBcblxuICAgIFxufSlcbm1vZHVsZS5leHBvcnRzID0gcm91dGVyO1xuIl19",
    "map": {
      "version": 3,
      "sources": [
        "admin.js"
      ],
      "names": [
        "express",
        "require",
        "router",
        "Router",
        "database",
        "get",
        "req",
        "res",
        "next",
        "render",
        "title",
        "post",
        "result",
        "body",
        "console",
        "log",
        "assigns",
        "keys",
        "Object",
        "forEach",
        "key",
        "query",
        "userId",
        "surveyCaptionId",
        "then",
        "err",
        "catch",
        "send",
        "success",
        "module",
        "exports"
      ],
      "mappings": "AAAA,IAAIA,OAAO,GAAGC,OAAO,CAAC,SAAD,CAArB;;AACA,IAAIC,MAAM,GAAGF,OAAO,CAACG,MAAR,EAAb;;AACA,MAAM;AAAEC,EAAAA;AAAF,IAAeH,OAAO,CAAC,mBAAD,CAA5B;AAEA;;;AACAC,MAAM,CAACG,GAAP,CAAW,GAAX,EAAgB,UAASC,GAAT,EAAcC,GAAd,EAAmBC,IAAnB,EAAyB;AACvCD,EAAAA,GAAG,CAACE,MAAJ,CAAW,OAAX,EAAoB;AAAEC,IAAAA,KAAK,EAAE;AAAT,GAApB;AACD,CAFD;AAKAR,MAAM,CAACS,IAAP,CAAY,eAAZ,EAA4B,CAACL,GAAD,EAAKC,GAAL,EAASC,IAAT,KAC5B;AACI,MAAII,MAAM,GAAGN,GAAG,CAACO,IAAjB;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAYH,MAAZ;AACA,MAAII,OAAO,GAAGJ,MAAM,CAACI,OAArB;AACA,MAAIC,IAAI,GAAEC,MAAM,CAACD,IAAP,CAAYL,MAAM,CAACI,OAAnB,CAAV;AAEIC,EAAAA,IAAI,CAACE,OAAL,CAAaC,GAAG,IAAG;AACfN,IAAAA,OAAO,CAACC,GAAR,CAAYC,OAAO,CAACI,GAAD,CAAnB;;AACA,QAAIJ,OAAO,CAACI,GAAD,CAAP,KAAiB,IAArB,EACA;AACIhB,MAAAA,QAAQ,CAACiB,KAAT,CAAgB,+DAA8DT,MAAM,CAACU,MAAO,IAAGF,GAAI,IAAGJ,OAAO,CAACO,eAAgB,GAA9H,EAAkIC,IAAlI,CAAuI,CAACZ,MAAD,EAAQa,GAAR,KAAc;AACjJX,QAAAA,OAAO,CAACC,GAAR,CAAYH,MAAZ,EAAmBa,GAAnB;AACH,OAFD,EAEGC,KAFH,CAESD,GAAG,IAAEX,OAAO,CAACC,GAAR,CAAYU,GAAZ,CAFd;AAGH,KALD,MAMKX,OAAO,CAACC,GAAR,CAAY,UAAZ;AACR,GATD;AAUAR,EAAAA,GAAG,CAACoB,IAAJ,CAAS;AAACC,IAAAA,OAAO,EAAC;AAAT,GAAT;AAOP,CAxBD;AAyBAC,MAAM,CAACC,OAAP,GAAiB5B,MAAjB",
      "sourceRoot": "/Users/hello/Desktop/Kentkart/surveyApi/routes/",
      "sourcesContent": [
        "var express = require('express');\nvar router = express.Router();\nconst { database } = require('../config/helpers')\n\n/* GET home page. */\nrouter.get('/', function(req, res, next) {\n  res.render('index', { title: 'Express' });\n});\n\n\nrouter.post('/surveyAssign',(req,res,next)=>\n{\n    let result = req.body;\n    console.log(result)\n    let assigns = result.assigns;\n    let keys= Object.keys(result.assigns) \n\n        keys.forEach(key =>{\n            console.log(assigns[key]);\n            if( assigns[key] === true)\n            {\n                database.query(`insert into surveyAssign (who,whom,surveyCaptionId) values (${result.userId},${key},${assigns.surveyCaptionId})`).then((result,err)=>{\n                    console.log(result,err)\n                }).catch(err=>console.log(err))\n            }\n            else console.log('eklemedi')\n        }) \n        res.send({success:true})  \n    \n     \n    \n    \n\n    \n})\nmodule.exports = router;\n"
      ]
    },
    "sourceType": "module",
    "mtime": 1602679021080
  }
}